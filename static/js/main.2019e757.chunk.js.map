{"version":3,"sources":["webaudio-controls.js","components/styledComponents.js","components/Sequencer.js","controllers/drums.js","components/Progression.js","controllers/rhythm.js","components/Keys.js","controllers/lead.js","screens/jamsession.js","screens/index.js","App.js","reportWebVitals.js","index.js"],"names":["window","customElements","styles","document","createElement","innerHTML","head","appendChild","midimenu","id","opt","useMidi","preserveMidiLearn","preserveValue","midilearn","mididump","outline","knobSrc","knobSprites","knobWidth","knobHeight","knobDiameter","knobColors","sliderSrc","sliderWidth","sliderHeight","sliderKnobSrc","sliderKnobWidth","sliderKnobHeight","sliderDitchlength","sliderColors","switchWidth","switchHeight","switchDiameter","switchColors","paramWidth","paramHeight","paramFontSize","paramColors","valuetip","xypadColors","WebAudioControlsOptions","Object","assign","WebAudioControlsWidget","addEventListener","keydown","pointerdown","passive","wheel","pointerover","pointerout","contextMenu","hover","drag","body","basestyle","onblur","elem","style","onfocus","ev","event","createEvent","initEvent","this","dispatchEvent","n","def","v","getAttribute","isNaN","d","s","tooltip","indexOf","ttframe","x","i","j","length","c","type","m","r","replace","parseInt","toString","toUpperCase","parseFloat","toFixed","valstr","slice","numformat","convValue","display","width","height","transition","opacity","visibility","rc","getBoundingClientRect","rc2","documentElement","left","top","labelpos","getAttr","lpos","split","offs","label","position","transform","e","showtip","webAudioControlsWidgetManager","contextMenuOpen","preventDefault","stopPropagation","channel","cc","listeningToThisMidiController","midiController","console","log","data","controlNumber","midiMode","setMidiController","contextMenuClose","tagName","setValue","value","els","querySelectorAll","group","val","min","max","HTMLElement","define","connectedCallback","root","attachShadow","mode","childNodes","firstChild","nextSibling","enable","_src","defineProperty","get","set","setupImage","_value","redraw","defvalue","_min","_max","_step","_sprites","_width","_height","_diameter","_colors","setupLabel","sensitivity","conv","eval","midicc","ch","substring","lastIndexOf","midiLearnTable","ml","digits","step","_setValue","coltab","addWidget","kw","kh","src","colors","svg","backgroundImage","btoa","backgroundSize","fireflag","img","Image","onload","sprites","ratio","Math","sp","offset","backgroundPosition","deg","round","oldvalue","f","sendEvent","delta","key","deltaY","shiftKey","pow","touches","changedTouches","identifier","buttons","button","focus","pointermove","lastShift","startPosX","pageX","startPosY","pageY","startVal","pointerup","removeEventListener","preventScroll","ctrlKey","metaKey","error","knob","tracking","_knobsrc","_direction","_knobwidth","_knobheight","_ditchlength","onclick","bodyimg","knobimg","srcurl","sw","sh","svgbody","dr","mm","kw2","kh2","svgknob","knobsrcurl","knobsrc","dlen","ditchlength","sensex","sensey","pageXOffset","pageYOffset","invert","checked","_fontsize","paramSrc","link","rconv","currentLink","fromLink","target","bind","onchange","imgloaded","fontSize","fontsize","l","getElementById","func","color","backgroundColor","background","cv","ctx","getContext","_values","_keys","press","keycodes1","keycodes2","keyup","bheight","kp","kf","ko","kn","keys","dispvalues","valuesold","rrect","y","w","h","c1","c2","g","createLinearGradient","addColorStop","fillStyle","beginPath","moveTo","lineTo","quadraticCurveTo","fill","fillRect","x0","wwidth","bwidth","h2","strokeStyle","stroke","floor","k","keyCode","currentKey","sendEventFromKey","setNote","p","targetTouches","px","clientX","py","clientY","push","sort","values","sendevent","note","notes","setdispvalues","state","splice","actx","when","t","currentTime","setTimeout","WebAudioControlsWidgetManager","midiAccess","listOfWidgets","listOfExternalMidiListeners","updateWidgets","JSON","parse","localStorage","getItem","initWebAudioControls","navigator","requestMIDIAccess","then","ma","enableInputs","err","code","inputs","size","input","next","done","name","onmidimessage","handleMIDIMessage","port","connection","midi","onstatechange","midiConnectionStateChange","callback","currentConfig","stringify","forEach","externalListener","processMidiEvent","menu","classList","add","contextMenuCloseByKey","remove","setItem","UseWebAudioControlsMidi","webAudioControlsMidiManager","Colors","Screen","styled","div","InstrumentWrapper","RowSection","ColSection","InstTitle","Pad","Sequencer","intervals","setIntervals","division","currentInterval","map","item","index","onClick","intervalsCopy","toggleState","textAlign","fontWeight","Drums","props","kickGain","kickNode","ReactDOM","findDOMNode","knobRef","snareNode","snareRef","changeKickGain","changeSnareGain","Tone","toDestination","kickSampler","config","kickUrl","connect","snareGain","snareSampler","snareUrl","click","time","kickLoop","start","snareLoop","updateConfig","gain","ref","node","diameter","kickSetLoop","snareSetLoop","Component","ChordList","AddChord","Chord","CText","Progression","addChord","chordList","chords","clearChords","useState","chord","setChord","setLength","interval","onChange","chd","find","obj","option","chordMode","newChord","len","Rhythm","rhythmPlayingNote","rhythmRef","changeRhythmGain","rhythmGain","rhythmSynth","rhythmLoop","rhythmGroove","loopLengthIntervals","playRhythm","chordListCpy","setRhythmLoop","a","chordObj","triggerAttackRelease","chordFreqs","clearRhythmLoop","Keys","keypress","useEffect","entries","entry","onMouseDown","onMouseUp","Lead","leadKeyNote","leadPlayingNote","leadKeyNoteDisplay","isLooping","leadGain","leadSynth","syncLeadLoop","keyNote","playLeadSynth","setState","loopInt","copyLoop","leadLoop","loopNote","synthNote","playNote","scaleFreqs","majorPent","triggerAttack","triggerRelease","blankLoop","Array","changeLeadGain","scaleShape","clearLeadLoop","beatDisplay","chromatic","natMaj","chromNotes","freq","getChromNotes","jambotConfig","rootNote","scalePattern","numBars","beatsPerBar","beatIntervals","clickBaseInterval","tempo","keyRoot","relMinorPent","minorPent","JamSession","pros","layout","setLayout","clickDisplay","setClickDisplay","setConfig","setup","setSetup","DrumRef","useRef","RhythmRef","LeadRef","init","current","loadKey","clickCallback","bpm","rootIndex","rootFreq","semitone","chromIndex","majorChordShape","minorChordShape","st","stop","Screens","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","render","StrictMode"],"mappings":"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","file":"static/js/main.2019e757.chunk.js","sourcesContent":["/* *\n *\n *  WebAudio-Controls is based on\n *    webaudio-knob by Eiji Kitamura http://google.com/+agektmr\n *    webaudio-slider by RYoya Kawai https://plus.google.com/108242669191458983485/posts\n *    webaudio-switch by Keisuke Ai http://d.hatena.ne.jp/aike/\n *  Integrated and enhanced by g200kg http://www.g200kg.com/\n *\n *\tCopyright 2013 Eiji Kitamura / Ryoya KAWAI / Keisuke Ai / g200kg(Tatsuya Shinyagaito)\n *\n *\t Licensed under the Apache License, Version 2.0 (the \"License\");\n *\t you may not use this file except in compliance with the License.\n *\t You may obtain a copy of the License at\n *\n *\t http://www.apache.org/licenses/LICENSE-2.0\n *\n *\t Unless required by applicable law or agreed to in writing, software\n *\t distributed under the License is distributed on an \"AS IS\" BASIS,\n *\t WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\t See the License for the specific language governing permissions and\n *\t limitations under the License.\n *\n * */\nif(window.customElements){\n  let styles=document.createElement(\"style\");\n  styles.innerHTML=\n`#webaudioctrl-context-menu {\n  display: none;\n  position: absolute;\n  z-index: 10;\n  padding: 0;\n  width: 100px;\n  color:#eee;\n  background-color: #268;\n  border: solid 1px #888;\n  box-shadow: 1px 1px 2px #888;\n  font-family: sans-serif;\n  font-size: 11px;\n  line-height:1.7em;\n  text-align:center;\n  cursor:pointer;\n  color:#fff;\n  list-style: none;\n}\n#webaudioctrl-context-menu.active {\n  display: block;\n}\n.webaudioctrl-context-menu__item {\n  display: block;\n  margin: 0;\n  padding: 0;\n  color: #000;\n  background-color:#eee;\n  text-decoration: none;\n}\n.webaudioctrl-context-menu__title{\n  font-weight:bold;\n}\n.webaudioctrl-context-menu__item:last-child {\n  margin-bottom: 0;\n}\n.webaudioctrl-context-menu__item:hover {\n  background-color: #b8b8b8;\n}\n`;\n  document.head.appendChild(styles);\n  let midimenu=document.createElement(\"ul\");\n  midimenu.id=\"webaudioctrl-context-menu\";\n  midimenu.innerHTML=\n`<li class=\"webaudioctrl-context-menu__title\">MIDI Learn</li>\n<li class=\"webaudioctrl-context-menu__item\" id=\"webaudioctrl-context-menu-learn\" onclick=\"webAudioControlsWidgetManager.contextMenuLearn()\">Learn</li>\n<li class=\"webaudioctrl-context-menu__item\" onclick=\"webAudioControlsWidgetManager.contextMenuClear()\">Clear</li>\n<li class=\"webaudioctrl-context-menu__item\" onclick=\"webAudioControlsWidgetManager.contextMenuClose()\">Close</li>\n`;\n  let opt={\n    useMidi:0,\n    preserveMidiLearn:0,\n    preserveValue:0,\n    midilearn:0,\n    mididump:0,\n    outline:null,\n    knobSrc:null,\n    knobSprites:null,\n    knobWidth:null,\n    knobHeight:null,\n    knobDiameter:null,\n    knobColors:\"#e00;#000;#fff\",\n    sliderSrc:null,\n    sliderWidth:null,\n    sliderHeight:null,\n    sliderKnobSrc:null,\n    sliderKnobWidth:null,\n    sliderKnobHeight:null,\n    sliderDitchlength:null,\n    sliderColors:\"#e00;#333;#fcc\",\n    switchWidth:null,\n    switchHeight:null,\n    switchDiameter:null,\n    switchColors:\"#e00;#000;#fcc\",\n    paramWidth:null,\n    paramHeight:null,\n    paramFontSize:9,\n    paramColors:\"#fff;#000\",\n    valuetip:0,\n    xypadColors:\"#e00;#000;#fcc\",\n  };\n  if(window.WebAudioControlsOptions)\n    Object.assign(opt,window.WebAudioControlsOptions);\n  class WebAudioControlsWidget extends HTMLElement{\n    constructor(){\n      super();\n      this.addEventListener(\"keydown\",this.keydown);\n      this.addEventListener(\"mousedown\",this.pointerdown,{passive:false});\n      this.addEventListener(\"touchstart\",this.pointerdown,{passive:false});\n      this.addEventListener(\"wheel\",this.wheel,{passive:false});\n      this.addEventListener(\"mouseover\",this.pointerover);\n      this.addEventListener(\"mouseout\",this.pointerout);\n      this.addEventListener(\"contextmenu\",this.contextMenu);\n      this.hover=this.drag=0;\n      document.body.appendChild(midimenu);\n      this.basestyle=`\n.webaudioctrl-tooltip{\n  display:inline-block;\n  position:absolute;\n  margin:0 -1000px;\n  z-index: 999;\n  background:#eee;\n  color:#000;\n  border:1px solid #666;\n  border-radius:4px;\n  padding:5px 10px;\n  text-align:center;\n  left:0; top:0;\n  font-size:11px;\n  opacity:0;\n  visibility:hidden;\n}\n.webaudioctrl-tooltip:before{\n  content: \"\";\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  margin-left: -8px;\n  border: 8px solid transparent;\n  border-top: 8px solid #666;\n}\n.webaudioctrl-tooltip:after{\n  content: \"\";\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  margin-left: -6px;\n  border: 6px solid transparent;\n  border-top: 6px solid #eee;\n}\n`;\n      this.onblur=()=>{\n        this.elem.style.outline=\"none\";\n      }\n      this.onfocus=()=>{\n        switch(+this.outline){\n        case null:\n        case 0:\n          this.elem.style.outline=\"none\";\n          break;\n        case 1:\n          this.elem.style.outline=\"1px solid #444\";\n          break;\n        default:\n          this.elem.style.outline=this.outline;\n        }\n      }\n    }\n    sendEvent(ev){\n      let event;\n      event=document.createEvent(\"HTMLEvents\");\n      event.initEvent(ev,false,true);\n      this.dispatchEvent(event);\n    }\n    getAttr(n,def){\n      let v=this.getAttribute(n);\n      if(v==null) return def;\n      switch(typeof(def)){\n      case \"number\":\n        if(v==\"true\") return 1;\n        v=+v;\n        if(isNaN(v)) return 0;\n        return v;\n      }\n      return v;\n    }\n    showtip(d){\n      function valstr(x,c,type){\n        switch(type){\n        case \"x\": return (x|0).toString(16);\n        case \"X\": return (x|0).toString(16).toUpperCase();\n        case \"d\": return (x|0).toString();\n        case \"f\": return parseFloat(x).toFixed(c);\n        case \"s\": return x.toString();\n        }\n        return \"\";\n      }\n      function numformat(s,x){\n        let i=s.indexOf(\"%\");\n        let j=i+1;\n        if(i<0)\n          j=s.length;\n        let c=[0,0],type=0,m=0,r=\"\";\n        if(s.indexOf(\"%s\")>=0){\n          return s.replace(\"%s\",x);\n        }\n        for(;j<s.length;++j){\n          if(\"dfxXs\".indexOf(s[j])>=0){\n            type=s[j];\n            break;\n          }\n          if(s[j]==\".\")\n            m=1;\n          else\n            c[m]=c[m]*10+parseInt(s[j]);\n        }\n        r=valstr(x,c[1],type);\n        if(c[0]>0)\n          r=(\"               \"+r).slice(-c[0]);\n        r=s.replace(/%.*[xXdfs]/,r);\n        return r;\n      }\n      let s=this.tooltip;\n      if(this.drag||this.hover){\n        if(this.valuetip){\n          if(s==null)\n            s=`%s`;\n          else if(s.indexOf(\"%\")<0)\n            s+=` : %s`;\n        }\n        if(s){\n          this.ttframe.innerHTML=numformat(s,this.convValue);\n          this.ttframe.style.display=\"inline-block\";\n          this.ttframe.style.width=\"auto\";\n          this.ttframe.style.height=\"auto\";\n          this.ttframe.style.transition=\"opacity 0.5s \"+d+\"s,visibility 0.5s \"+d+\"s\";\n          this.ttframe.style.opacity=0.9;\n          this.ttframe.style.visibility=\"visible\";\n          let rc=this.getBoundingClientRect(),rc2=this.ttframe.getBoundingClientRect(),rc3=document.documentElement.getBoundingClientRect();\n          this.ttframe.style.left=((rc.width-rc2.width)*0.5+1000)+\"px\";\n          this.ttframe.style.top=(-rc2.height-8)+\"px\";\n          return;\n        }\n      }\n      this.ttframe.style.transition=\"opacity 0.1s \"+d+\"s,visibility 0.1s \"+d+\"s\";\n      this.ttframe.style.opacity=0;\n      this.ttframe.style.visibility=\"hidden\";\n    }\n    setupLabel(){\n      this.labelpos=this.getAttr(\"labelpos\", \"bottom 0px\");\n      const lpos=this.labelpos.split(\" \");\n      let offs=\"\";\n      if(lpos.length==3)\n        offs=`translate(${lpos[1]},${lpos[2]})`;\n      this.label.style.position=\"absolute\";\n      switch(lpos[0]){\n      case \"center\":\n        this.label.style.top=\"50%\";\n        this.label.style.left=\"50%\";\n        this.label.style.transform=`translate(-50%,-50%) ${offs}`;\n        break;\n      case \"right\":\n        this.label.style.top=\"50%\";\n        this.label.style.left=\"100%\";\n        this.label.style.transform=`translateY(-50%) ${offs}`;\n        break;\n      case \"left\":\n        this.label.style.top=\"50%\";\n        this.label.style.left=\"0%\";\n        this.label.style.transform=`translate(-100%,-50%) ${offs}`;\n        break;\n      case \"bottom\":\n        this.label.style.top=\"100%\";\n        this.label.style.left=\"50%\";\n        this.label.style.transform=`translateX(-50%) ${offs}`;\n        break;\n      case \"top\":\n        this.label.style.top=\"0%\";\n        this.label.style.left=\"50%\";\n        this.label.style.transform=`translate(-50%,-100%) ${offs}`;\n        break;\n      }\n    }\n    pointerover(e) {\n      this.hover=1;\n      this.showtip(0.6);\n    }\n    pointerout(e) {\n      this.hover=0;\n      this.showtip(0);\n    }\n    contextMenu(e){\n      if(window.webAudioControlsWidgetManager && this.midilearn)\n        window.webAudioControlsWidgetManager.contextMenuOpen(e,this);\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    setMidiController(channel, cc) {\n      if (this.listeningToThisMidiController(channel, cc)) return;\n      this.midiController={ 'channel': channel, 'cc': cc};\n      console.log(\"Added mapping for channel=\" + channel + \" cc=\" + cc + \" tooltip=\" + this.tooltip);\n    }\n    listeningToThisMidiController(channel, cc) {\n      const c = this.midiController;\n      if((c.channel === channel || c.channel < 0) && c.cc === cc)\n        return true;\n      return false;\n    }\n    processMidiEvent(event){\n      const channel = event.data[0] & 0xf;\n      const controlNumber = event.data[1];\n      if(this.midiMode == 'learn') {\n        this.setMidiController(channel, controlNumber);\n        window.webAudioControlsWidgetManager.contextMenuClose();\n        this.midiMode = 'normal';\n        window.webAudioControlsWidgetManager.preserveMidiLearn();\n      }\n      if(this.listeningToThisMidiController(channel, controlNumber)) {\n        if(this.tagName==\"WEBAUDIO-SWITCH\"){\n          switch(this.type){\n          case \"toggle\":\n            if(event.data[2]>=64)\n              this.setValue(1-this.value,true);\n            break;\n          case \"kick\":\n            this.setValue(event.data[2]>=64?1:0);\n            break;\n          case \"radio\":\n            let els=document.querySelectorAll(\"webaudio-switch[type='radio'][group='\"+this.group+\"']\");\n            for(let i=0;i<els.length;++i){\n              if(els[i]==this)\n                els[i].setValue(1);\n              else\n                els[i].setValue(0);\n            }\n            break;\n          }\n        }\n        else{\n          const val = this.min+(this.max-this.min)*event.data[2]/127;\n          this.setValue(val, true);\n        }\n      }\n    }\n  }\n\ntry{\n    customElements.define(\"webaudio-knob\", class WebAudioKnob extends WebAudioControlsWidget {\n    constructor(){\n      super();\n    }\n    connectedCallback(){\n      let root;\n      if(this.attachShadow)\n        root=this.attachShadow({mode: 'open'});\n      else\n        root=this;\n      root.innerHTML=\n`<style>\n${this.basestyle}\n:host{\n  display:inline-block;\n  margin:0;\n  padding:0;\n  cursor:pointer;\n  font-family: sans-serif;\n  font-size: 11px;\n}\n.webaudio-knob-body{\n  display:inline-block;\n  position:relative;\n  margin:0;\n  padding:0;\n  vertical-align:bottom;\n  white-space:pre;\n}\n</style>\n<div class='webaudio-knob-body' tabindex='1' touch-action='none'><div class='webaudioctrl-tooltip'></div><div part=\"label\" class=\"webaudioctrl-label\"><slot></slot></div></div>\n`;\n      this.elem=root.childNodes[2];\n      this.ttframe=this.elem.firstChild;\n      this.label=this.ttframe.nextSibling;\n      this.enable=this.getAttr(\"enable\",1);\n      this._src=this.getAttr(\"src\",opt.knobSrc); Object.defineProperty(this,\"src\",{get:()=>{return this._src},set:(v)=>{this._src=v;this.setupImage()}});\n      this._value=this.getAttr(\"value\",0); Object.defineProperty(this,\"value\",{get:()=>{return this._value},set:(v)=>{this._value=v;this.redraw()}});\n      this.defvalue=this.getAttr(\"defvalue\",this._value);\n      this._min=this.getAttr(\"min\",0); Object.defineProperty(this,\"min\",{get:()=>{return this._min},set:(v)=>{this._min=+v;this.redraw()}});\n      this._max=this.getAttr(\"max\",100); Object.defineProperty(this,\"max\",{get:()=>{return this._max},set:(v)=>{this._max=+v;this.redraw()}});\n      this._step=this.getAttr(\"step\",1); Object.defineProperty(this,\"step\",{get:()=>{return this._step},set:(v)=>{this._step=+v;this.redraw()}});\n      this._sprites=this.getAttr(\"sprites\",opt.knobSprites); Object.defineProperty(this,\"sprites\",{get:()=>{return this._sprites},set:(v)=>{this._sprites=v;this.setupImage()}});\n      this._width=this.getAttr(\"width\", null); Object.defineProperty(this,\"width\",{get:()=>{return this._width},set:(v)=>{this._width=v;this.setupImage()}});\n      this._height=this.getAttr(\"height\", null); Object.defineProperty(this,\"height\",{get:()=>{return this._height},set:(v)=>{this._height=v;this.setupImage()}});\n      this._diameter=this.getAttr(\"diameter\", null); Object.defineProperty(this,\"diameter\",{get:()=>{return this._diameter},set:(v)=>{this._diameter=v;this.setupImage()}});\n      this._colors=this.getAttr(\"colors\",opt.knobColors); Object.defineProperty(this,\"colors\",{get:()=>{return this._colors},set:(v)=>{this._colors=v;this.setupImage()}});\n      this.outline=this.getAttr(\"outline\",opt.outline);\n      this.setupLabel();\n      this.log=this.getAttr(\"log\",0);\n      this.sensitivity=this.getAttr(\"sensitivity\",1);\n      this.valuetip=this.getAttr(\"valuetip\",opt.valuetip);\n      this.tooltip=this.getAttr(\"tooltip\",null);\n      this.conv=this.getAttr(\"conv\",null);\n      if(this.conv){\n        const x=this._value;\n        this.convValue=eval(this.conv);\n        if(typeof(this.convValue)==\"function\")\n          this.convValue=this.convValue(x);\n      }\n      else\n        this.convValue=this._value;\n      this.midilearn=this.getAttr(\"midilearn\",opt.midilearn);\n      this.midicc=this.getAttr(\"midicc\",null);\n      this.midiController={};\n      this.midiMode=\"normal\";\n      if(this.midicc) {\n          let ch = parseInt(this.midicc.substring(0, this.midicc.lastIndexOf(\".\"))) - 1;\n          let cc = parseInt(this.midicc.substring(this.midicc.lastIndexOf(\".\") + 1));\n          this.setMidiController(ch, cc);\n      }\n      if(this.midilearn && this.id){\n        if(window.webAudioControlsWidgetManager && window.webAudioControlsWidgetManager.midiLearnTable){\n          const ml=window.webAudioControlsWidgetManager.midiLearnTable;\n          for(let i=0; i < ml.length; ++i){\n            if(ml[i].id==this.id){\n              this.setMidiController(ml[i].cc.channel, ml[i].cc.cc);\n              break;\n            }\n          }\n        }\n      }\n      this.setupImage();\n      this.digits=0;\n      if(this.step && this.step < 1) {\n        for(let n = this.step ; n < 1; n *= 10)\n          ++this.digits;\n      }\n      this._setValue(this._value);\n      this.coltab=[\"#e00\",\"#000\",\"#000\"];\n      if(window.webAudioControlsWidgetManager)\n        window.webAudioControlsWidgetManager.addWidget(this);\n    }\n    disconnectedCallback(){}\n    setupImage(){\n      this.kw=this._width||this._diameter||opt.knobWidth||opt.knobDiameter;\n      this.kh=this._height||this._diameter||opt.knobHeight||opt.knobDiameter;\n      if(!this.src){\n        if(this.colors)\n          this.coltab = this.colors.split(\";\");\n        if(!this.coltab)\n          this.coltab=[\"#e00\",\"#000\",\"#000\"];\n        let svg=\n`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"64\" height=\"6464\" preserveAspectRatio=\"none\">\n<defs>\n  <filter id=\"f1\">\n    <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"0.8\" />\n  </filter>\n  <radialGradient id=\"g1\" cx=\"50%\" cy=\"10%\">\n    <stop offset=\"0%\" stop-color=\"${this.coltab[2]}\"/>\n    <stop offset=\"100%\" stop-color=\"${this.coltab[1]}\"/>\n  </radialGradient>\n  <linearGradient id=\"g2\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n    <stop offset=\"0%\" stop-color=\"#000\" stop-opacity=\"0\"/>\n    <stop offset=\"100%\" stop-color=\"#000\" stop-opacity=\"0.3\"/>\n  </linearGradient>\n  <g id=\"B\">\n    <circle cx=\"32\" cy=\"32\" r=\"31\" fill=\"#000\"/>\n    <circle cx=\"32\" cy=\"32\" r=\"29\" fill=\"url(#g1)\"/>\n    <circle cx=\"32\" cy=\"32\" r=\"29\" fill=\"url(#g2)\"/>\n    <circle cx=\"32\" cy=\"32\" r=\"25\" fill=\"${this.coltab[1]}\" filter=\"url(#f1)\"/>\n    <circle cx=\"32\" cy=\"32\" r=\"29\" fill=\"url(#g2)\"/>\n  </g>\n  <line id=\"K\" x1=\"32\" y1=\"25\" x2=\"32\" y2=\"11\" stroke-linecap=\"round\" stroke-width=\"6\" stroke=\"${this.coltab[0]}\"/>\n</defs>`;\n        for(let i=0;i<101;++i){\n          svg += `<use href=\"#B\" y=\"${64*i}\"/><use href=\"#K\" y=\"${64*i}\" transform=\"rotate(${(-135+270*i/101).toFixed(2)},32,${64*i+32})\"/>`;\n        }\n        svg += \"</svg>\";\n        this.elem.style.backgroundImage = \"url(data:image/svg+xml;base64,\"+btoa(svg)+\")\";\n        if(this.kw==null) this.kw=64;\n        if(this.kh==null) this.kh=64;\n        this.elem.style.backgroundSize = `${this.kw}px ${this.kh*101}px`;\n        this.elem.style.width=this.kw+\"px\";\n        this.elem.style.height=this.kh+\"px\";\n        this.style.height=this.kh+\"px\";\n        this.fireflag=true;\n        this.redraw();\n        return;\n      }\n      else{\n        this.img=new Image();\n        this.img.onload=()=>{\n          this.elem.style.backgroundImage = \"url(\"+(this.src)+\")\";\n          if(this._sprites==null)\n            this._sprites=this.img.height/this.img.width - 1;\n          else\n            this._sprites=+this._sprites;\n          if(this.kw==null) this.kw=this.img.width;\n          if(this.kh==null) this.kh=this.img.height/(this.sprites+1);\n          if(!this.sprites)\n            this.elem.style.backgroundSize = \"100% 100%\";\n          else\n            this.elem.style.backgroundSize = `${this.kw}px ${this.kh*(this.sprites+1)}px`;\n          this.elem.style.width=this.kw+\"px\";\n          this.elem.style.height=this.kh+\"px\";\n          this.style.height=this.kh+\"px\";\n          this.redraw();\n        };\n        this.img.src=this.src;\n      }\n    }\n    redraw() {\n      let ratio;\n      this.digits=0;\n      if(this.step && this.step < 1) {\n        for(let n = this.step ; n < 1; n *= 10)\n          ++this.digits;\n      }\n      if(this.value<this.min){\n        this.value=this.min;\n      }\n      if(this.value>this.max){\n        this.value=this.max;\n      }\n      if(this.log)\n        ratio = Math.log(this.value/this.min) / Math.log(this.max/this.min);\n      else\n        ratio = (this.value - this.min) / (this.max - this.min);\n      let style = this.elem.style;\n      let sp = this.src?this.sprites:100;\n      if(sp>=1){\n        let offset = (sp * ratio) | 0;\n        style.backgroundPosition = \"0px \" + (-offset*this.kh) + \"px\";\n        style.transform = 'rotate(0deg)';\n      } else {\n        let deg = 270 * (ratio - 0.5);\n        style.backgroundPosition=\"0px 0px\";\n        style.transform = 'rotate(' + deg + 'deg)';\n      }\n    }\n    _setValue(v){\n      if(this.step)\n        v=(Math.round((v-this.min)/this.step))*this.step+this.min;\n      this._value=Math.min(this.max,Math.max(this.min,v));\n      if(this._value!=this.oldvalue){\n        this.fireflag=true;\n        this.oldvalue=this._value;\n        if(this.conv){\n          const x=this._value;\n          this.convValue=eval(this.conv);\n          if(typeof(this.convValue)==\"function\")\n            this.convValue=this.convValue(x);\n        }\n        else\n          this.convValue=this._value;\n        if(typeof(this.convValue)==\"number\"){\n          this.convValue=this.convValue.toFixed(this.digits);\n        }\n        this.redraw();\n        this.showtip(0);\n        return 1;\n      }\n      return 0;\n    }\n    setValue(v,f){\n      if(this._setValue(v) && f){\n        this.sendEvent(\"input\");\n        this.sendEvent(\"change\");\n      }\n    }\n    keydown(e){\n      const delta = this.step;\n      if(delta==0)\n        delta=1;\n      switch(e.key){\n      case \"ArrowUp\":\n        this.setValue(this.value+delta,true);\n        break;\n      case \"ArrowDown\":\n        this.setValue(this.value-delta,true);\n        break;\n      default:\n          return;\n      }\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    wheel(e) {\n      if (!this.enable)\n        return;\n      if(this.log){\n        let r=Math.log(this.value/this.min)/Math.log(this.max/this.min);\n        let d = (e.deltaY>0?-0.01:0.01);\n        if(!e.shiftKey)\n          d*=5;\n        r += d;\n        this.setValue(this.min*Math.pow(this.max/this.min,r),true);\n      }\n      else{\n        let delta=Math.max(this.step, (this.max-this.min)*0.05);\n        if(e.shiftKey)\n          delta=this.step?this.step:1;\n        delta=e.deltaY>0?-delta:delta;\n        this.setValue(+this.value+delta,true);\n      }\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    pointerdown(ev){\n      if(!this.enable)\n        return;\n      let e=ev;\n      if(ev.touches){\n        e = ev.changedTouches[0];\n        this.identifier=e.identifier;\n      }\n      else {\n        if(e.buttons!=1 && e.button!=0)\n          return;\n      }\n      this.elem.focus();\n      this.drag=1;\n      this.showtip(0);\n      this.oldvalue=this._value;\n      let pointermove=(ev)=>{\n        let e=ev;\n        if(ev.touches){\n          for(let i=0;i<ev.touches.length;++i){\n            if(ev.touches[i].identifier==this.identifier){\n              e = ev.touches[i];\n              break;\n            }\n          }\n        }\n        if(this.lastShift !== e.shiftKey) {\n          this.lastShift = e.shiftKey;\n          this.startPosX = e.pageX;\n          this.startPosY = e.pageY;\n          this.startVal = this.value;\n        }\n        let offset = (this.startPosY - e.pageY - this.startPosX + e.pageX) * this.sensitivity;\n        if(this.log){\n          let r = Math.log(this.startVal / this.min) / Math.log(this.max / this.min);\n          r += offset/((e.shiftKey?4:1)*128);\n          if(r<0) r=0;\n          if(r>1) r=1;\n          this._setValue(this.min * Math.pow(this.max/this.min, r));\n        }\n        else{\n          this._setValue(this.min + ((((this.startVal + (this.max - this.min) * offset / ((e.shiftKey ? 4 : 1) * 128)) - this.min) / this.step) | 0) * this.step);\n        }\n        if(this.fireflag){\n          this.sendEvent(\"input\");\n          this.fireflag=false;\n        }\n        if(e.preventDefault)\n          e.preventDefault();\n        if(e.stopPropagation)\n          e.stopPropagation();\n        return false;\n      }\n      let pointerup=(ev)=>{\n        let e=ev;\n        if(ev.touches){\n          for(let i=0;;){\n            if(ev.changedTouches[i].identifier==this.identifier){\n              break;\n            }\n            if(++i>=ev.changedTouches.length)\n              return;\n          }\n        }\n        this.drag=0;\n        this.showtip(0);\n        this.startPosX = this.startPosY = null;\n        window.removeEventListener('mousemove', pointermove);\n        window.removeEventListener('touchmove', pointermove, {passive:false});\n        window.removeEventListener('mouseup', pointerup);\n        window.removeEventListener('touchend', pointerup);\n        window.removeEventListener('touchcancel', pointerup);\n        document.body.removeEventListener('touchstart', preventScroll,{passive:false});\n        this.sendEvent(\"change\");\n      }\n      let preventScroll=(e)=>{\n        e.preventDefault();\n      }\n      if(e.ctrlKey || e.metaKey)\n        this.setValue(this.defvalue,true);\n      else {\n        this.startPosX = e.pageX;\n        this.startPosY = e.pageY;\n        this.startVal = this.value;\n        window.addEventListener('mousemove', pointermove);\n        window.addEventListener('touchmove', pointermove, {passive:false});\n      }\n      window.addEventListener('mouseup', pointerup);\n      window.addEventListener('touchend', pointerup);\n      window.addEventListener('touchcancel', pointerup);\n      document.body.addEventListener('touchstart', preventScroll,{passive:false});\n      ev.preventDefault();\n      ev.stopPropagation();\n      return false;\n    }\n  });\n} catch(error){\n  console.log(\"webaudio-knob already defined\");\n}\n\ntry{\n  customElements.define(\"webaudio-slider\", class WebAudioSlider extends WebAudioControlsWidget {\n    constructor(){\n      super();\n    }\n    connectedCallback(){\n      let root;\n      if(this.attachShadow)\n        root=this.attachShadow({mode: 'open'});\n      else\n        root=this;\n      root.innerHTML=\n`<style>\n${this.basestyle}\n:host{\n  display:inline-block;\n  position:relative;\n  margin:0;\n  padding:0;\n  font-family: sans-serif;\n  font-size: 11px;\n  cursor:pointer;\n}\n.webaudio-slider-body{\n  display:inline-block;\n  position:relative;\n  margin:0;\n  padding:0;\n  vertical-align:bottom;\n  white-space:pre;\n}\n.webaudio-slider-knob{\n  display:inline-block;\n  position:absolute;\n  margin:0;\n  padding:0;\n}\n</style>\n<div class='webaudio-slider-body' tabindex='1' touch-action='none'><div class='webaudio-slider-knob' touch-action='none'></div><div class='webaudioctrl-tooltip'></div><div part=\"label\" class=\"webaudioctrl-label\"><slot></slot></div></div>\n`;\n      this.elem=root.childNodes[2];\n      this.knob=this.elem.firstChild;\n      this.ttframe=this.knob.nextSibling;\n      this.label=this.ttframe.nextSibling;\n      this.enable=this.getAttr(\"enable\",1);\n      this.tracking=this.getAttr(\"tracking\",\"rel\"); \n      this._src=this.getAttr(\"src\",opt.sliderSrc); Object.defineProperty(this,\"src\",{get:()=>{return this._src},set:(v)=>{this._src=v;this.setupImage()}});\n      this._knobsrc=this.getAttr(\"knobsrc\",opt.sliderKnobSrc); Object.defineProperty(this,\"knobsrc\",{get:()=>{return this._knobsrc},set:(v)=>{this._knobsrc=v;this.setupImage()}});\n      this._value=this.getAttr(\"value\",0); Object.defineProperty(this,\"value\",{get:()=>{return this._value},set:(v)=>{this._value=v;this.redraw()}});\n      this.defvalue=this.getAttr(\"defvalue\",this._value);\n      this._min=this.getAttr(\"min\",0); Object.defineProperty(this,\"min\",{get:()=>{return this._min},set:(v)=>{this._min=v;this.redraw()}});\n      this._max=this.getAttr(\"max\",100); Object.defineProperty(this,\"max\",{get:()=>{return this._max},set:(v)=>{this._max=v;this.redraw()}});\n      this._step=this.getAttr(\"step\",1); Object.defineProperty(this,\"step\",{get:()=>{return this._step},set:(v)=>{this._step=v;this.redraw()}});\n      this._sprites=this.getAttr(\"sprites\",0); Object.defineProperty(this,\"sprites\",{get:()=>{return this._sprites},set:(v)=>{this._sprites=v;this.setupImage()}});\n      this._direction=this.getAttr(\"direction\",null); Object.defineProperty(this,\"direction\",{get:()=>{return this._direction},set:(v)=>{this._direction=v;this.setupImage()}});\n      this.log=this.getAttr(\"log\",0);\n      this._width=this.getAttr(\"width\",opt.sliderWidth); Object.defineProperty(this,\"width\",{get:()=>{return this._width},set:(v)=>{this._width=v;this.setupImage()}});\n      this._height=this.getAttr(\"height\",opt.sliderHeight); Object.defineProperty(this,\"height\",{get:()=>{return this._height},set:(v)=>{this._height=v;this.setupImage()}});\n      this._knobwidth=this.getAttr(\"knobwidth\",opt.sliderKnobWidth); Object.defineProperty(this,\"knobwidth\",{get:()=>{return this._knobwidth},set:(v)=>{this._knobwidth=v;this.setupImage()}});\n      this._knobheight=this.getAttr(\"knobheight\",opt.sliderKnobHeight); Object.defineProperty(this,\"knobheight\",{get:()=>{return this._knobheight},set:(v)=>{this._knobheight=v;this.setupImage()}});\n      this._ditchlength=this.getAttr(\"ditchlength\",opt.sliderDitchlength); Object.defineProperty(this,\"ditchlength\",{get:()=>{return this._ditchlength},set:(v)=>{this._ditchlength=v;this.setupImage()}});\n      this._colors=this.getAttr(\"colors\",opt.sliderColors); Object.defineProperty(this,\"colors\",{get:()=>{return this._colors},set:(v)=>{this._colors=v;this.setupImage()}});\n      this.outline=this.getAttr(\"outline\",opt.outline);\n      this.setupLabel();\n      this.sensitivity=this.getAttr(\"sensitivity\",1);\n      this.valuetip=this.getAttr(\"valuetip\",opt.valuetip);\n      this.tooltip=this.getAttr(\"tooltip\",null);\n      this.conv=this.getAttr(\"conv\",null);\n      if(this.conv){\n        const x=this._value;\n        this.convValue=eval(this.conv);\n        if(typeof(this.convValue)==\"function\")\n          this.convValue=this.convValue(x);\n      }\n      else\n        this.convValue=this._value;\n      this.midilearn=this.getAttr(\"midilearn\",opt.midilearn);\n      this.midicc=this.getAttr(\"midicc\",null);\n      this.midiController={};\n      this.midiMode=\"normal\";\n      if(this.midicc) {\n          let ch = parseInt(this.midicc.substring(0, this.midicc.lastIndexOf(\".\"))) - 1;\n          let cc = parseInt(this.midicc.substring(this.midicc.lastIndexOf(\".\") + 1));\n          this.setMidiController(ch, cc);\n      }\n      if(this.midilearn && this.id){\n        if(window.webAudioControlsWidgetManager && window.webAudioControlsWidgetManager.midiLearnTable){\n          const ml=window.webAudioControlsWidgetManager.midiLearnTable;\n          for(let i=0; i < ml.length; ++i){\n            if(ml[i].id==this.id){\n              this.setMidiController(ml[i].cc.channel, ml[i].cc.cc);\n              break;\n            }\n          }\n        }\n      }\n      this.setupImage();\n      this.digits=0;\n      if(this.step && this.step < 1) {\n        for(let n = this.step ; n < 1; n *= 10)\n          ++this.digits;\n      }\n      this.fireflag=true;\n      if(window.webAudioControlsWidgetManager)\n//        window.webAudioControlsWidgetManager.updateWidgets();\n        window.webAudioControlsWidgetManager.addWidget(this);\n      this.elem.onclick=(e)=>{e.stopPropagation()};\n    }\n    disconnectedCallback(){}\n    setupImage(){\n      this.coltab = this.colors.split(\";\");\n      this.bodyimg=new Image();\n      this.knobimg=new Image();\n      this.srcurl=null;\n      if(this.src==null||this.src==\"\"){\n        this.sw=+this._width;\n        this.sh=+this.height;\n        if(this._direction==\"horz\"){\n          if(this._width==null) this.sw=128;\n          if(this._height==null) this.sh=24;\n        }\n        else if(this._direction==\"vert\"){\n          if(this._width==null) this.sw=24;\n          if(this._height==null) this.sh=128;\n        }\n        else{\n          if(this._width==null) this.sw=128;\n          if(this._height==null) this.sh=24;\n        }\n        const r=Math.min(this.sw,this.sh)*0.5;\n        const svgbody=\n`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${this.sw}\" height=\"${this.sh}\" preserveAspectRatio=\"none\">\n<defs>\n  <filter id=\"f1\">\n    <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"0.8\" />\n  </filter>\n  <linearGradient id=\"g1\" x1=\"0%\" y1=\"0%\" ${(this.sw>this.sh)?'x2=\"0%\" y2=\"100%\"':'x2=\"100%\" y2=\"0%\"'}>\n    <stop offset=\"0%\" stop-color=\"#000\" stop-opacity=\"0\"/>\n    <stop offset=\"100%\" stop-color=\"#000\" stop-opacity=\"0.3\"/>\n  </linearGradient>\n</defs>\n<rect x=\"1\" y=\"1\" rx=\"${r}\" ry=\"${r}\" width=\"${this.sw-2}\" height=\"${this.sh-2}\" fill=\"#000\"/>\n<rect x=\"3\" y=\"3\" rx=\"${r}\" ry=\"${r}\" width=\"${this.sw-6}\" height=\"${this.sh-6}\" fill=\"${this.coltab[1]}\" filter=\"url(#f1)\"/>\n<rect x=\"1\" y=\"1\" rx=\"${r}\" ry=\"${r}\" width=\"${this.sw-2}\" height=\"${this.sh-2}\" fill=\"url(#g1)\"/>\n</svg>`;\n        this.srcurl = \"data:image/svg+xml;base64,\"+btoa(svgbody);\n      }\n      else{\n        this.srcurl = this.src;\n      }\n      this.bodyimg.onload=()=>{\n        if(this.src!=\"\")\n          this.elem.style.backgroundImage = \"url(\"+this.srcurl+\")\";\n        this.sw=+this._width;\n        this.sh=+this._height;\n        if(this._width==null) this.sw=this.bodyimg.width;\n        if(this._height==null) this.sh=this.bodyimg.height;\n        if(this.dr==null){\n          if(this.sw>this.sh)\n            this.dr=\"horz\";\n          else\n            this.dr=\"vert\";\n        }\n        this.kw=+this._knobwidth;\n        this.kh=+this._knobheight;\n        if(this._knobsrc==null){\n          if(this._knobwidth==null) this.kw=Math.min(this.sw,this.sh);\n          if(this._knobheight==null) this.kh=Math.min(this.sw,this.sh);\n          const mm=Math.min(this.kw,this.kh)*0.5;\n          const kw2=Math.max(1,this.kw-12);\n          const kh2=Math.max(1,this.kh-12);\n          const svgknob=\n`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${this.kw}\" height=\"${this.kh}\" preserveAspectRatio=\"none\">\n<defs>\n  <filter id=\"f1\">\n    <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"0.8\" />\n  </filter>\n  <linearGradient id=\"g1\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n    <stop offset=\"0%\" stop-color=\"${this.coltab[2]}\"/>\n    <stop offset=\"50%\" stop-color=\"${this.coltab[0]}\"/>\n    <stop offset=\"100%\" stop-color=\"${this.coltab[0]}\" stop-opacity=\"0.5\"/>\n  </linearGradient>\n  <linearGradient id=\"g2\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n    <stop offset=\"0%\" stop-color=\"${this.coltab[0]}\"/>\n    <stop offset=\"100%\" stop-color=\"${this.coltab[0]}\"/>\n  </linearGradient>\n  <linearGradient id=\"g3\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n    <stop offset=\"0%\" stop-color=\"#000\" stop-opacity=\"0\"/>\n    <stop offset=\"100%\" stop-color=\"#000\" stop-opacity=\"0.3\"/>\n  </linearGradient>\n</defs>\n<rect x=\"2\" y=\"2\" width=\"${this.kw-4}\" height=\"${this.kh-4}\" rx=\"${mm}\" ry=\"${mm}\" fill=\"#000\"/>\n<rect x=\"3\" y=\"3\" width=\"${this.kw-6}\" height=\"${this.kh-6}\" rx=\"${mm}\" ry=\"${mm}\" fill=\"url(#g1)\"/>\n<rect x=\"6\" y=\"6\" width=\"${kw2}\" height=\"${kh2}\" rx=\"${mm}\" ry=\"${mm}\" fill=\"url(#g2)\" filter=\"url(#f1)\"/>\n<rect x=\"3\" y=\"3\" width=\"${this.kw-6}\" height=\"${this.kh-6}\" rx=\"${mm}\" ry=\"${mm}\" fill=\"url(#g3)\"/>\n</svg>`;\n          this.knobsrcurl = \"data:image/svg+xml;base64,\"+btoa(svgknob);\n        }\n        else{\n          this.knobsrcurl = this.knobsrc;\n        }\n        this.knobimg.onload=()=>{\n          this.knob.style.backgroundImage = \"url(\"+this.knobsrcurl+\")\";\n          if(this._knobwidth==null) this.kw=this.knobimg.width;\n          if(this._knobheight==null) this.kh=this.knobimg.height;\n          this.dlen=this.ditchlength;\n          if(this.dlen==null){\n            if(this.dr==\"horz\")\n              this.dlen=this.sw-this.kw;\n            else\n              this.dlen=this.sh-this.kh;\n          }\n          this.knob.style.backgroundSize = \"100% 100%\";\n          this.knob.style.width = this.kw+\"px\";\n          this.knob.style.height = this.kh+\"px\";\n          this.elem.style.backgroundSize = \"100% 100%\";\n          this.elem.style.width=this.sw+\"px\";\n          this.elem.style.height=this.sh+\"px\";\n          this.redraw();\n        };\n        this.knobimg.src=this.knobsrcurl;\n      };\n      this.bodyimg.src=this.srcurl;\n    }\n    redraw() {\n      let ratio;\n      this.digits=0;\n      if(this.step && this.step < 1) {\n        for(let n = this.step ; n < 1; n *= 10)\n          ++this.digits;\n      }\n      if(this.value<this.min){\n        this.value=this.min;\n      }\n      if(this.value>this.max){\n        this.value=this.max;\n      }\n      if(this.log)\n        ratio = Math.log(this.value/this.min) / Math.log(this.max/this.min);\n      else\n        ratio = (this.value - this.min) / (this.max - this.min);\n      let style = this.knob.style;\n      if(this.dr==\"horz\"){\n        style.top=(this.sh-this.kh)*0.5+\"px\";\n        style.left=((this.sw-this.kw-this.dlen)*0.5+ratio*this.dlen)+\"px\";\n        this.sensex=1; this.sensey=0;\n      }\n      else{\n        style.left=(this.sw-this.kw)*0.5+\"px\";\n        style.top=((this.sh-this.kh-this.dlen)*0.5+(1-ratio)*this.dlen)+\"px\";\n        this.sensex=0; this.sensey=1;\n      }\n    }\n    _setValue(v){\n      v=(Math.round((v-this.min)/this.step))*this.step+this.min;\n      this._value=Math.min(this.max,Math.max(this.min,v));\n      if(this._value!=this.oldvalue){\n        this.oldvalue=this._value;\n        this.fireflag=true;\n        if(this.conv){\n          const x=this._value;\n          this.convValue=eval(this.conv);\n          if(typeof(this.convValue)==\"function\")\n            this.convValue=this.convValue(x);\n        }\n        else\n          this.convValue=this._value;\n        if(typeof(this.convValue)==\"number\"){\n          this.convValue=this.convValue.toFixed(this.digits);\n        }\n        this.redraw();\n        this.showtip(0);\n        return 1;\n      }\n      return 0;\n    }\n    setValue(v,f){\n      if(this._setValue(v)&&f){\n        this.sendEvent(\"input\");\n        this.sendEvent(\"change\");\n      }\n    }\n    keydown(e){\n      const delta = this.step;\n      if(delta==0)\n        delta=1;\n      switch(e.key){\n      case \"ArrowUp\":\n        this.setValue(this.value+delta,true);\n        break;\n      case \"ArrowDown\":\n        this.setValue(this.value-delta,true);\n        break;\n      default:\n          return;\n      }\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    wheel(e) {\n      if (!this.enable)\n        return;\n      if(this.log){\n        let r=Math.log(this.value/this.min)/Math.log(this.max/this.min);\n        let d = (e.deltaY>0?-0.01:0.01);\n        if(!e.shiftKey)\n          d*=5;\n        r += d;\n        this.setValue(this.min*Math.pow(this.max/this.min,r),true);\n      }\n      else{\n        let delta=Math.max(this.step, (this.max-this.min)*0.05);\n        if(e.shiftKey)\n          delta=this.step?this.step:1;\n        delta=e.deltaY>0?-delta:delta;\n        this.setValue(+this.value+delta,true);\n      }\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    pointerdown(ev){\n      if(!this.enable)\n        return;\n      let e=ev;\n      if(ev.touches){\n        e = ev.changedTouches[0];\n        this.identifier=e.identifier;\n      }\n      else {\n        if(e.buttons!=1 && e.button!=0)\n          return;\n      }\n      this.elem.focus();\n      this.drag=1;\n      this.showtip(0);\n      let pointermove=(ev)=>{\n        let e=ev;\n        if(ev.touches){\n          for(let i=0;i<ev.touches.length;++i){\n            if(ev.touches[i].identifier==this.identifier){\n              e = ev.touches[i];\n              break;\n            }\n          }\n        }\n        if(this.lastShift !== e.shiftKey) {\n          this.lastShift = e.shiftKey;\n          this.startPosX = e.pageX;\n          this.startPosY = e.pageY;\n          this.startVal = this.value;\n        }\n        if(this.tracking==\"abs\"){\n          const rc = this.getBoundingClientRect();\n          let val;\n          if(this.dr==\"horz\")\n            val = Math.max(0,Math.min(1,(e.pageX-rc.left-window.pageXOffset-this.kw*0.5)/(this.width-this.kw)));\n          else\n            val = 1 - Math.max(0,Math.min(1,(e.pageY-rc.top-window.pageYOffset-this.kh*0.5)/(this.height-this.kh)));\n          if(this.log){\n            this._setValue(this.min * Math.pow(this.max/this.min, val));\n          }\n          else\n            this._setValue(this.min + (this.max - this.min)*val);\n        }\n        else{\n          let offset = ((this.startPosY - e.pageY)*this.sensey - (this.startPosX - e.pageX)*this.sensex) * this.sensitivity;\n          if(this.log){\n            let r = Math.log(this.startVal / this.min) / Math.log(this.max / this.min);\n            r += offset/((e.shiftKey?4:1)*128);\n            if(r<0) r=0;\n            if(r>1) r=1;\n            this._setValue(this.min * Math.pow(this.max/this.min, r));\n          }\n          else{\n            this._setValue(this.min + ((((this.startVal + (this.max - this.min) * offset / ((e.shiftKey ? 4 : 1) * this.dlen)) - this.min) / this.step) | 0) * this.step);\n          }\n        }\n        if(this.fireflag){\n          this.sendEvent(\"input\");\n          this.fireflag=false;\n        }\n        if(e.preventDefault)\n          e.preventDefault();\n        if(e.stopPropagation)\n          e.stopPropagation();\n        return false;\n      }\n      let pointerup=(ev)=>{\n        let e=ev;\n        if(ev.touches){\n          for(let i=0;;){\n            if(ev.changedTouches[i].identifier==this.identifier){\n              break;\n            }\n            if(++i>=ev.changedTouches.length)\n              return;\n          }\n        }\n        this.drag=0;\n        this.showtip(0);\n        this.startPosX = this.startPosY = null;\n        window.removeEventListener('mousemove', pointermove);\n        window.removeEventListener('touchmove', pointermove, {passive:false});\n        window.removeEventListener('mouseup', pointerup);\n        window.removeEventListener('touchend', pointerup);\n        window.removeEventListener('touchcancel', pointerup);\n        document.body.removeEventListener('touchstart', preventScroll,{passive:false});\n        this.sendEvent(\"change\");\n      }\n      let preventScroll=(e)=>{\n        e.preventDefault();\n      }\n      if(e.touches)\n        e = e.touches[0];\n      if(e.ctrlKey || e.metaKey)\n        this.setValue(this.defvalue,true);\n      else {\n        this.startPosX = e.pageX;\n        this.startPosY = e.pageY;\n        this.startVal = this.value;\n        window.addEventListener('mousemove', pointermove);\n        window.addEventListener('touchmove', pointermove, {passive:false});\n        pointermove(ev);\n      }\n      window.addEventListener('mouseup', pointerup);\n      window.addEventListener('touchend', pointerup);\n      window.addEventListener('touchcancel', pointerup);\n      document.body.addEventListener('touchstart', preventScroll,{passive:false});\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }\n  });\n} catch(error){\n  console.log(\"webaudio-slider already defined\");\n}\n\ntry{\n  customElements.define(\"webaudio-switch\", class WebAudioSwitch extends WebAudioControlsWidget {\n    constructor(){\n      super();\n    }\n    connectedCallback(){\n      let root;\n      if(this.attachShadow)\n        root=this.attachShadow({mode: 'open'});\n      else\n        root=this;\n      root.innerHTML=\n`<style>\n${this.basestyle}\n:host{\n  display:inline-block;\n  position:relative;\n  margin:0;\n  padding:0;\n  font-family: sans-serif;\n  font-size: 11px;\n  cursor:pointer;\n}\n.webaudio-switch-body{\n  display:inline-block;\n  position:relative;\n  margin:0;\n  padding:0;\n  vertical-align:bottom;\n  white-space:pre;\n}\n.webaudioctrl-label{\n  position:absolute;\n  left:50%;\n  top:50%;\n}\n</style>\n<div class='webaudio-switch-body' tabindex='1' touch-action='none'><div class='webaudioctrl-tooltip'></div><div part=\"label\" class=\"webaudioctrl-label\"><slot></slot></div></div>\n`;\n      this.elem=root.childNodes[2];\n      this.ttframe=this.elem.firstChild;\n      this.label=this.ttframe.nextSibling;\n      this.enable=this.getAttr(\"enable\",1);\n      this._src=this.getAttr(\"src\",null); Object.defineProperty(this,\"src\",{get:()=>{return this._src},set:(v)=>{this._src=v;this.setupImage()}});\n      this._value=this.getAttr(\"value\",0); Object.defineProperty(this,\"value\",{get:()=>{return this._value},set:(v)=>{this._value=v;this.redraw()}});\n      this.defvalue=this.getAttr(\"defvalue\",this._value);\n      this.type=this.getAttr(\"type\",\"toggle\");\n      this.group=this.getAttr(\"group\",\"\");\n      this._width=this.getAttr(\"width\",null); Object.defineProperty(this,\"width\",{get:()=>{return this._width},set:(v)=>{this._width=v;this.setupImage()}});\n      this._height=this.getAttr(\"height\",null); Object.defineProperty(this,\"height\",{get:()=>{return this._height},set:(v)=>{this._height=v;this.setupImage()}});\n      this._diameter=this.getAttr(\"diameter\",null); Object.defineProperty(this,\"diameter\",{get:()=>{return this._diameter},set:(v)=>{this._diameter=v;this.setupImage()}});\n      this.invert=this.getAttr(\"invert\",0);\n      this._colors=this.getAttr(\"colors\",opt.switchColors); Object.defineProperty(this,\"colors\",{get:()=>{return this._colors},set:(v)=>{this._colors=v;this.setupImage()}});\n      this.outline=this.getAttr(\"outline\",opt.outline);\n      this.setupLabel();\n      this.valuetip=0;\n      this.tooltip=this.getAttr(\"tooltip\",null);\n      this.midilearn=this.getAttr(\"midilearn\",opt.midilearn);\n      this.midicc=this.getAttr(\"midicc\",null);\n      this.midiController={};\n      this.midiMode=\"normal\";\n      if(this.midicc) {\n          let ch = parseInt(this.midicc.substring(0, this.midicc.lastIndexOf(\".\"))) - 1;\n          let cc = parseInt(this.midicc.substring(this.midicc.lastIndexOf(\".\") + 1));\n          this.setMidiController(ch, cc);\n      }\n      if(this.midilearn && this.id){\n        if(window.webAudioControlsWidgetManager && window.webAudioControlsWidgetManager.midiLearnTable){\n          const ml=window.webAudioControlsWidgetManager.midiLearnTable;\n          for(let i=0; i < ml.length; ++i){\n            if(ml[i].id==this.id){\n              this.setMidiController(ml[i].cc.channel, ml[i].cc.cc);\n              break;\n            }\n          }\n        }\n      }\n      this.setupImage();\n      this.digits=0;\n      if(this.step && this.step < 1) {\n        for(let n = this.step ; n < 1; n *= 10)\n          ++this.digits;\n      }\n      if(window.webAudioControlsWidgetManager)\n//        window.webAudioControlsWidgetManager.updateWidgets();\n        window.webAudioControlsWidgetManager.addWidget(this);\n      this.elem.onclick=(e)=>{e.stopPropagation()};\n    }\n    disconnectedCallback(){}\n    setupImage(){\n      this.coltab = this.colors.split(\";\");\n      this.kw=this._width||this._diameter||opt.switchWidth||opt.switchDiameter;\n      this.kh=this._height||this._diameter||opt.switchHeight||opt.switchDiameter;\n      this.img=new Image();\n      this.srcurl=null;\n      if(this.src==null||this.src==\"\"){\n        if(this.kw==null) this.kw=32;\n        if(this.kh==null) this.kh=32;\n        const mm=Math.min(this.kw,this.kh);\n        const kw=this.kw,kh=this.kh;\n        const svg=\n`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${this.kw}\" height=\"${this.kh*2}\" preserveAspectRatio=\"none\">\n<defs>\n<linearGradient id=\"g1\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n  <stop offset=\"0%\" stop-color=\"#000\" stop-opacity=\"0\"/>\n  <stop offset=\"100%\" stop-color=\"#000\" stop-opacity=\"0.2\"/>\n</linearGradient>\n<radialGradient id=\"g2\" cx=\"50%\" cy=\"30%\">\n    <stop offset=\"0%\" stop-color=\"${this.coltab[2]}\"/>\n    <stop offset=\"100%\" stop-color=\"${this.coltab[0]}\"/>\n  </radialGradient>\n  <filter id=\"f1\">\n    <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\".4\" />\n  </filter>\n</defs>\n<g id=\"p1\">\n  <rect x=\"${kw*.075}\" y=\"${kh*.075}\" width=\"${kw*.85}\" height=\"${kh*.85}\" rx=\"${mm*.1}\" ry=\"${mm*.1}\" fill=\"#000\"/>\n  <rect x=\"${kw*.1}\" y=\"${kh*.1}\" width=\"${kw*.8}\" height=\"${kh*.8}\" rx=\"${mm*.1}\" ry=\"${mm*.1}\" fill=\"${this.coltab[1]}\"/>\n</g>\n<g id=\"p2\">\n  <circle cx=\"${kw*0.5}\" cy=\"${kh*0.5}\" r=\"${mm*0.35}\" stroke=\"#000\" stroke-width=\"${mm*.03}\" fill=\"${this.coltab[0]}\" filter=\"url(#f1)\"/>\n  <circle cx=\"${kw*0.5}\" cy=\"${kh*0.5}\" r=\"${mm*0.27}\" stroke=\"#000\" stroke-width=\"${mm*.03}\" fill=\"#000\" filter=\"url(#f1)\"/>\n  <rect x=\"${kw*.075}\" y=\"${kh*.075}\" width=\"${kw*.85}\" height=\"${kh*.85}\" rx=\"${mm*.1}\" ry=\"${mm*.1}\" fill=\"url(#g1)\"/>\n</g>\n<use href=\"#p1\" y=\"${kh}\"/>\n<use href=\"#p2\" y=\"${kh}\"/>\n<circle cx=\"${kw*.5}\" cy=\"${kh*1.5}\" r=\"${mm*.25}\" fill=\"url(#g2)\" filter=\"url(#f1)\"/>\n<circle cx=\"${kw*.5}\" cy=\"${kh*1.5}\" r=\"${mm*.25}\" fill=\"url(#g1)\"/>\n</svg>`;\n        this.srcurl=\"data:image/svg+xml;base64,\"+btoa(svg);\n      }\n      else\n        this.srcurl=this.src;\n      this.img.onload=()=>{\n        if(this.kw==null) this.kw=this.img.width;\n        if(this.kh==null) this.kh=this.img.height*0.5;\n        this.elem.style.backgroundImage = \"url(\"+this.srcurl+\")\";\n        this.elem.style.backgroundSize = \"100% 200%\";\n        this.elem.style.width=this.kw+\"px\";\n        this.elem.style.height=this.kh+\"px\";\n        this.redraw();\n      }\n      this.img.src=this.srcurl;\n    }\n    redraw() {\n      let style = this.elem.style;\n      if(this.value^this.invert)\n        style.backgroundPosition = \"0px -100%\";\n      else\n        style.backgroundPosition = \"0px 0px\";\n    }\n    setValue(v,f){\n      this.value=v;\n      this.checked=(!!v);\n      if(this.value!=this.oldvalue){\n        this.redraw();\n        this.showtip(0);\n        if(f){\n          this.sendEvent(\"input\");\n          this.sendEvent(\"change\");\n        }\n        this.oldvalue=this.value;\n      }\n    }\n    pointerdown(ev){\n      if(!this.enable)\n        return;\n      let e=ev;\n      if(ev.touches){\n        e = ev.changedTouches[0];\n        this.identifier=e.identifier;\n      }\n      else {\n        if(e.buttons!=1 && e.button!=0)\n          return;\n      }\n      this.elem.focus();\n      this.drag=1;\n      this.showtip(0);\n      let pointermove=(e)=>{\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      }\n      let pointerup=(e)=>{\n        this.drag=0;\n        this.showtip(0);\n        window.removeEventListener('mousemove', pointermove);\n        window.removeEventListener('touchmove', pointermove, {passive:false});\n        window.removeEventListener('mouseup', pointerup);\n        window.removeEventListener('touchend', pointerup);\n        window.removeEventListener('touchcancel', pointerup);\n        document.body.removeEventListener('touchstart', preventScroll,{passive:false});\n        if(this.type==\"kick\"){\n          this.value=0;\n          this.checked=false;\n          this.redraw();\n          this.sendEvent(\"change\");\n        }\n        this.sendEvent(\"click\");\n        e.preventDefault();\n        e.stopPropagation();\n      }\n      let preventScroll=(e)=>{\n        e.preventDefault();\n      }\n      switch(this.type){\n      case \"kick\":\n        this.setValue(1);\n        this.sendEvent(\"change\");\n        break;\n      case \"toggle\":\n        if(e.ctrlKey || e.metaKey)\n          this.value=this.defvalue;\n        else\n          this.value=1-this.value;\n        this.checked=!!this.value;\n        this.sendEvent(\"change\");\n        break;\n      case \"radio\":\n        let els=document.querySelectorAll(\"webaudio-switch[type='radio'][group='\"+this.group+\"']\");\n        for(let i=0;i<els.length;++i){\n          if(els[i]==this)\n            els[i].setValue(1);\n          else\n            els[i].setValue(0);\n        }\n        this.sendEvent(\"change\");\n        break;\n      }\n\n      window.addEventListener('mouseup', pointerup);\n      window.addEventListener('touchend', pointerup);\n      window.addEventListener('touchcancel', pointerup);\n      document.body.addEventListener('touchstart', preventScroll,{passive:false});\n      this.redraw();\n      ev.preventDefault();\n      ev.stopPropagation();\n      return false;\n    }\n  });\n} catch(error){\n  console.log(\"webaudio-switch already defined\");\n}\n\ntry{\n  customElements.define(\"webaudio-param\", class WebAudioParam extends WebAudioControlsWidget {\n    constructor(){\n      super();\n      this.addEventListener(\"keydown\",this.keydown);\n      this.addEventListener(\"mousedown\",this.pointerdown,{passive:false});\n      this.addEventListener(\"touchstart\",this.pointerdown,{passive:false});\n      this.addEventListener(\"wheel\",this.wheel);\n      this.addEventListener(\"mouseover\",this.pointerover);\n      this.addEventListener(\"mouseout\",this.pointerout);\n      this.addEventListener(\"contextmenu\",this.contextMenu);\n    }\n    connectedCallback(){\n      let root;\n      if(this.attachShadow)\n        root=this.attachShadow({mode: 'open'});\n      else\n        root=this;\n      root.innerHTML=\n`<style>\n${this.basestyle}\n:host{\n  display:inline-block;\n  user-select:none;\n  margin:0;\n  padding:0;\n  font-family: sans-serif;\n  font-size: 8px;\n  cursor:pointer;\n  position:relative;\n  vertical-align:baseline;\n}\n.webaudio-param-body{\n  display:inline-block;\n  position:relative;\n  text-align:center;\n  background:none;\n  margin:0;\n  padding:0;\n  font-family:sans-serif;\n  font-size:11px;\n  vertical-align:bottom;\n  border:none;\n}\n</style>\n<input class='webaudio-param-body' value='0' tabindex='1' touch-action='none'/><div class='webaudioctrl-tooltip'></div>\n`;\n      this.elem=root.childNodes[2];\n      this.ttframe=root.childNodes[3];\n      this.enable=this.getAttr(\"enable\",1);\n      this._value=this.getAttr(\"value\",0); Object.defineProperty(this,\"value\",{get:()=>{return this._value},set:(v)=>{this._value=v;this.redraw()}});\n      this.defvalue=this.getAttr(\"defvalue\",0);\n      this._fontsize=this.getAttr(\"fontsize\",9); Object.defineProperty(this,\"fontsize\",{get:()=>{return this._fontsize},set:(v)=>{this._fontsize=v;this.setupImage()}});\n      this._src=this.getAttr(\"src\",opt.paramSrc); Object.defineProperty(this,\"src\",{get:()=>{return this._src},set:(v)=>{this._src=v;this.setupImage()}});\n      this.link=this.getAttr(\"link\",\"\");\n      this._width=this.getAttr(\"width\",opt.paramWidth); Object.defineProperty(this,\"width\",{get:()=>{return this._width},set:(v)=>{this._width=v;this.setupImage()}});\n      this._height=this.getAttr(\"height\",opt.paramHeight); Object.defineProperty(this,\"height\",{get:()=>{return this._height},set:(v)=>{this._height=v;this.setupImage()}});\n      this._colors=this.getAttr(\"colors\",opt.paramColors); Object.defineProperty(this,\"colors\",{get:()=>{return this._colors},set:(v)=>{this._colors=v;this.setupImage()}});\n      this.outline=this.getAttr(\"outline\",opt.outline);\n      this.rconv=this.getAttr(\"rconv\",null);\n      this.midiController={};\n      this.midiMode=\"normal\";\n      this.currentLink=null;\n      if(this.midicc) {\n        let ch = parseInt(this.midicc.substring(0, this.midicc.lastIndexOf(\".\"))) - 1;\n        let cc = parseInt(this.midicc.substring(this.midicc.lastIndexOf(\".\") + 1));\n        this.setMidiController(ch, cc);\n      }\n      this.setupImage();\n      if(window.webAudioControlsWidgetManager)\n//        window.webAudioControlsWidgetManager.updateWidgets();\n        window.webAudioControlsWidgetManager.addWidget(this);\n      this.fromLink=((e)=>{\n        this.setValue(e.target.convValue.toFixed(e.target.digits));\n      }).bind(this);\n      this.elem.onchange=()=>{\n        if(!this.currentLink.target.conv || (this.currentLink.target.conv&&this.rconv)){\n          let val = this.value=this.elem.value;\n          if(this.rconv){\n            let x=+this.elem.value;\n            val=eval(this.rconv);\n          }\n          if(this.currentLink){\n            this.currentLink.target.setValue(val, true);\n          }\n        }\n      }\n    }\n    disconnectedCallback(){}\n    setupImage(){\n      this.imgloaded=()=>{\n        if(this.src!=\"\"&&this.src!=null){\n          this.elem.style.backgroundImage = \"url(\"+this.src+\")\";\n          this.elem.style.backgroundSize = \"100% 100%\";\n          if(this._width==null) this._width=this.img.width;\n          if(this._height==null) this._height=this.img.height;\n        }\n        else{\n          if(this._width==null) this._width=32;\n          if(this._height==null) this._height=20;\n        }\n        this.elem.style.width=this._width+\"px\";\n        this.elem.style.height=this._height+\"px\";\n        this.elem.style.fontSize=this.fontsize+\"px\";\n        let l=document.getElementById(this.link);\n        if(l&&typeof(l.value)!=\"undefined\"){\n          if(typeof(l.convValue)==\"number\")\n            this.setValue(l.convValue.toFixed(l.digits));\n          else\n            this.setValue(l.convValue);\n          if(this.currentLink)\n            this.currentLink.removeEventListener(\"input\",this.currentLink.func);\n          this.currentLink={target:l, func:(e)=>{\n            if(typeof(l.convValue)==\"number\")\n              this.setValue(l.convValue.toFixed(l.digits));\n            else\n              this.setValue(l.convValue);\n          }};\n          this.currentLink.target.addEventListener(\"input\",this.currentLink.func);\n  //        l.addEventListener(\"input\",(e)=>{this.setValue(l.convValue.toFixed(l.digits))});\n        }\n        this.redraw();\n      };\n      this.coltab = this.colors.split(\";\");\n      this.elem.style.color=this.coltab[0];\n      this.img=new Image();\n      this.img.onload=this.imgloaded.bind();\n      if(this.src==null){\n        this.elem.style.backgroundColor=this.coltab[1];\n        this.imgloaded();\n      }\n      else if(this.src==\"\"){\n        this.elem.style.background=\"none\";\n        this.imgloaded();\n      }\n      else{\n        this.img.src=this.src;\n      }\n    }\n    redraw() {\n      this.elem.value=this.value;\n    }\n    setValue(v,f){\n      this.value=v;\n      if(this.value!=this.oldvalue){\n        this.redraw();\n        this.showtip(0);\n        if(f){\n          let event=document.createEvent(\"HTMLEvents\");\n          event.initEvent(\"change\",false,true);\n          this.dispatchEvent(event);\n        }\n        this.oldvalue=this.value;\n      }\n    }\n    pointerdown(ev){\n      if(!this.enable)\n        return;\n      let e=ev;\n      if(ev.touches)\n          e = ev.touches[0];\n      else {\n        if(e.buttons!=1 && e.button!=0)\n          return;\n      }\n      this.elem.focus();\n      this.redraw();\n    }\n  });\n} catch(error){\n  console.log(\"webaudio-param already defined\");\n}\n\ntry{\n  customElements.define(\"webaudio-keyboard\", class WebAudioKeyboard extends WebAudioControlsWidget {\n    constructor(){\n      super();\n    }\n    connectedCallback(){\n      let root;\n      if(this.attachShadow)\n        root=this.attachShadow({mode: 'open'});\n      else\n        root=this;\n      root.innerHTML=\n`<style>\n${this.basestyle}\n:host{\n  display:inline-block;\n  position:relative;\n  margin:0;\n  padding:0;\n  font-family: sans-serif;\n  font-size: 11px;\n}\n.webaudio-keyboard-body{\n  display:inline-block;\n  margin:0;\n  padding:0;\n  vertical-align:bottom;\n}\n</style>\n<canvas class='webaudio-keyboard-body' tabindex='1' touch-action='none'></canvas><div class='webauioctrl-tooltip'></div>\n`;\n      this.elem=this.cv=root.childNodes[2];\n      this.ttframe=root.childNodes[3];\n      this.ctx=this.cv.getContext(\"2d\");\n      this._values=[];\n      this.enable=this.getAttr(\"enable\",1);\n      this._width=this.getAttr(\"width\",480); Object.defineProperty(this,\"width\",{get:()=>{return this._width},set:(v)=>{this._width=v;this.setupImage()}});\n      this._height=this.getAttr(\"height\",128); Object.defineProperty(this,\"height\",{get:()=>{return this._height},set:(v)=>{this._height=v;this.setupImage()}});\n      this._min=this.getAttr(\"min\",0); Object.defineProperty(this,\"min\",{get:()=>{return this._min},set:(v)=>{this._min=+v;this.redraw()}});\n      this._keys=this.getAttr(\"keys\",25); Object.defineProperty(this,\"keys\",{get:()=>{return this._keys},set:(v)=>{this._keys=+v;this.setupImage()}});\n      this._colors=this.getAttr(\"colors\",\"#222;#eee;#ccc;#333;#000;#e88;#c44;#c33;#800\"); Object.defineProperty(this,\"colors\",{get:()=>{return this._colors},set:(v)=>{this._colors=v;this.setupImage()}});\n      this.outline=this.getAttr(\"outline\",opt.outline);\n      this.midilearn=this.getAttr(\"midilearn\",0);\n      this.midicc=this.getAttr(\"midicc\",null);\n      this.press=0;\n      this.keycodes1=[90,83,88,68,67,86,71,66,72,78,74,77,188,76,190,187,191,226];\n      this.keycodes2=[81,50,87,51,69,82,53,84,54,89,55,85,73,57,79,48,80,192,222,219];\n      this.addEventListener(\"keyup\",this.keyup);\n      this.midiController={};\n      this.midiMode=\"normal\";\n      if(this.midicc) {\n          let ch = parseInt(this.midicc.substring(0, this.midicc.lastIndexOf(\".\"))) - 1;\n          let cc = parseInt(this.midicc.substring(this.midicc.lastIndexOf(\".\") + 1));\n          this.setMidiController(ch, cc);\n      }\n      this.setupImage();\n      this.digits=0;\n      if(this.step && this.step < 1) {\n        for(let n = this.step ; n < 1; n *= 10)\n          ++this.digits;\n      }\n      if(window.webAudioControlsWidgetManager)\n        window.webAudioControlsWidgetManager.addWidget(this);\n    }\n    disconnectedCallback(){}\n    setupImage(){\n      this.cv.style.width=this.width+\"px\";\n      this.cv.style.height=this.height+\"px\";\n      this.bheight = this.height * 0.55;\n      this.kp=[0,7/12,1,3*7/12,2,3,6*7/12,4,8*7/12,5,10*7/12,6];\n      this.kf=[0,1,0,1,0,0,1,0,1,0,1,0];\n      this.ko=[0,0,(7*2)/12-1,0,(7*4)/12-2,(7*5)/12-3,0,(7*7)/12-4,0,(7*9)/12-5,0,(7*11)/12-6];\n      this.kn=[0,2,4,5,7,9,11];\n      this.coltab=this.colors.split(\";\");\n      this.cv.width = this.width;\n      this.cv.height = this.height;\n      this.cv.style.width = this.width+'px';\n      this.cv.style.height = this.height+'px';\n      this.style.height = this.height+'px';\n      this.cv.style.outline=this.outline?\"\":\"none\";\n      this.bheight = this.height * 0.55;\n      this.max=this.min+this.keys-1;\n      this.dispvalues=[];\n      this.valuesold=[];\n      if(this.kf[this.min%12])\n        --this.min;\n      if(this.kf[this.max%12])\n        ++this.max;\n      this.redraw();\n    }\n    redraw(){\n      function rrect(ctx, x, y, w, h, r, c1, c2) {\n        if(c2) {\n          let g=ctx.createLinearGradient(x,y,x+w,y);\n          g.addColorStop(0,c1);\n          g.addColorStop(1,c2);\n          ctx.fillStyle=g;\n        }\n        else\n          ctx.fillStyle=c1;\n        ctx.beginPath();\n        ctx.moveTo(x, y);\n        ctx.lineTo(x+w, y);\n        ctx.lineTo(x+w, y+h-r);\n        ctx.quadraticCurveTo(x+w, y+h, x+w-r, y+h);\n        ctx.lineTo(x+r, y+h);\n        ctx.quadraticCurveTo(x, y+h, x, y+h-r);\n        ctx.lineTo(x, y);\n        ctx.fill();\n      }\n      this.ctx.fillStyle = this.coltab[0];\n      this.ctx.fillRect(0,0,this.width,this.height);\n      let x0=7*((this.min/12)|0)+this.kp[this.min%12];\n      let x1=7*((this.max/12)|0)+this.kp[this.max%12];\n      let n=x1-x0;\n      this.wwidth=(this.width-1)/(n+1);\n      this.bwidth=this.wwidth*7/12;\n      let h2=this.bheight;\n      let r=Math.min(8,this.wwidth*0.2);\n      for(let i=this.min,j=0;i<=this.max;++i) {\n        if(this.kf[i%12]==0) {\n          let x=this.wwidth*(j++)+1;\n          if(this.dispvalues.indexOf(i)>=0)\n            rrect(this.ctx,x,1,this.wwidth-1,this.height-2,r,this.coltab[5],this.coltab[6]);\n          else\n            rrect(this.ctx,x,1,this.wwidth-1,this.height-2,r,this.coltab[1],this.coltab[2]);\n        }\n      }\n      r=Math.min(8,this.bwidth*0.3);\n      for(let i=this.min;i<this.max;++i) {\n        if(this.kf[i%12]) {\n          let x=this.wwidth*this.ko[this.min%12]+this.bwidth*(i-this.min)+1;\n          if(this.dispvalues.indexOf(i)>=0)\n            rrect(this.ctx,x,1,this.bwidth,h2,r,this.coltab[7],this.coltab[8]);\n          else\n            rrect(this.ctx,x,1,this.bwidth,h2,r,this.coltab[3],this.coltab[4]);\n          this.ctx.strokeStyle=this.coltab[0];\n          this.ctx.stroke();\n        }\n      }\n    }\n    _setValue(v){\n      if(this.step)\n        v=(Math.round((v-this.min)/this.step))*this.step+this.min;\n      this._value=Math.min(this.max,Math.max(this.min,v));\n      if(this._value!=this.oldvalue){\n        this.oldvalue=this._value;\n        this.redraw();\n        this.showtip(0);\n        return 1;\n      }\n      return 0;\n    }\n    setValue(v,f){\n      if(this._setValue(v) && f){\n        this.sendEvent(\"input\");\n        this.sendEvent(\"change\");\n      }\n    }\n    wheel(e){}\n    keydown(e){\n      let m=Math.floor((this.min+11)/12)*12;\n      let k=this.keycodes1.indexOf(e.keyCode);\n      if(k<0) {\n        k=this.keycodes2.indexOf(e.keyCode);\n        if(k>=0) k+=12;\n      }\n      if(k>=0){\n        k+=m;\n        if(this.currentKey!=k){\n          this.currentKey=k;\n          this.sendEventFromKey(1,k);\n          this.setNote(1,k);\n        }\n      }\n    }\n    keyup(e){\n      let m=Math.floor((this.min+11)/12)*12;\n      let k=this.keycodes1.indexOf(e.keyCode);\n      if(k<0) {\n        k=this.keycodes2.indexOf(e.keyCode);\n        if(k>=0) k+=12;\n      }\n      if(k>=0){\n        k+=m;\n        this.currentKey=-1;\n        this.sendEventFromKey(0,k);\n        this.setNote(0,k);\n      }\n    }\n    pointerdown(ev){\n      this.cv.focus();\n      if(this.enable) {\n        ++this.press;\n      }\n      let pointermove=(ev)=>{\n        if(!this.enable)\n          return;\n        let r=this.getBoundingClientRect();\n        let v=[],p;\n        if(ev.touches)\n          p=ev.targetTouches;\n        else if(this.press)\n          p=[ev];\n        else\n          p=[];\n        if(p.length>0)\n          this.drag=1;\n        for(let i=0;i<p.length;++i) {\n          let px=p[i].clientX-r.left;\n          let py=p[i].clientY-r.top;\n          let x,k,ko;\n          if(py>=0&&py<this.height){\n            if(py<this.bheight) {\n              x=px-this.wwidth*this.ko[this.min%12];\n              k=this.min+((x/this.bwidth)|0);\n            }\n            else {\n              k=(px/this.wwidth)|0;\n              ko=this.kp[this.min%12];\n              k+=ko;\n              k=this.min+((k/7)|0)*12+this.kn[k%7]-this.kn[ko%7];\n            }\n            if(k>=this.min&&k<=this.max)\n              v.push(k);\n          }\n        }\n        v.sort();\n        this.values=v;\n        this.sendevent();\n        this.redraw();\n      }\n        \n      let pointerup=(ev)=>{\n        if(this.enable) {\n          if(ev.touches)\n            this.press=ev.touches.length;\n          else\n            this.press=0;\n          pointermove(ev);\n          this.sendevent();\n          if(this.press==0){\n            window.removeEventListener('mousemove', pointermove);\n            window.removeEventListener('touchmove', pointermove, {passive:false});\n            window.removeEventListener('mouseup', pointerup);\n            window.removeEventListener('touchend', pointerup);\n            window.removeEventListener('touchcancel', pointerup);\n            document.body.removeEventListener('touchstart', preventScroll,{passive:false});\n          }\n          this.redraw();\n        }\n        this.drag=0;\n        ev.preventDefault();\n      }\n      let preventScroll=(ev)=>{\n        ev.preventDefault();\n      }\n      window.addEventListener('mousemove', pointermove);\n      window.addEventListener('touchmove', pointermove, {passive:false});\n      window.addEventListener('mouseup', pointerup);\n      window.addEventListener('touchend', pointerup);\n      window.addEventListener('touchcancel', pointerup);\n      document.body.addEventListener('touchstart', preventScroll,{passive:false});\n      pointermove(ev);\n      ev.preventDefault();\n      ev.stopPropagation();\n    }\n    sendEventFromKey(s,k){\n      let ev=document.createEvent('HTMLEvents');\n      ev.initEvent('change',true,true);\n      ev.note=[s,k];\n      this.dispatchEvent(ev);\n    }\n    sendevent(){\n      let notes=[];\n      for(let i=0,j=this.valuesold.length;i<j;++i) {\n        if(this.values.indexOf(this.valuesold[i])<0)\n          notes.push([0,this.valuesold[i]]);\n      }\n      for(let i=0,j=this.values.length;i<j;++i) {\n        if(this.valuesold.indexOf(this.values[i])<0)\n          notes.push([1,this.values[i]]);\n      }\n      if(notes.length) {\n        this.valuesold=this.values;\n        for(let i=0;i<notes.length;++i) {\n          this.setdispvalues(notes[i][0],notes[i][1]);\n          let ev=document.createEvent('HTMLEvents');\n          ev.initEvent('change',true,true);\n          ev.note=notes[i];\n          this.dispatchEvent(ev);\n        }\n      }\n    }\n    setdispvalues(state,note) {\n      let n=this.dispvalues.indexOf(note);\n      if(state) {\n        if(n<0) this.dispvalues.push(note);\n      }\n      else {\n        if(n>=0) this.dispvalues.splice(n,1);\n      }\n    }\n    setNote(state,note,actx,when) {\n      const t=(actx&&when-actx.currentTime);\n      if(t>0){\n        setTimeout(()=>{this.setNote(state,note)},t*1000);\n      }\n      else{\n        this.setdispvalues(state,note);\n        this.redraw();\n      }\n    }  });\n} catch(error){\n  console.log(\"webaudio-keyboard already defined\");\n}\n\n  class WebAudioControlsWidgetManager {\n    constructor(){\n      this.midiAccess = null;\n      this.listOfWidgets = [];\n      this.listOfExternalMidiListeners = [];\n      this.updateWidgets();\n      if(opt.preserveMidiLearn)\n        this.midiLearnTable=JSON.parse(localStorage.getItem(\"WebAudioControlsMidiLearn\"));\n      else\n        this.midiLearnTable=null;\n      this.initWebAudioControls();\n    }\n    addWidget(w){\n      this.listOfWidgets.push(w);\n    }\n    updateWidgets(){\n//      this.listOfWidgets = document.querySelectorAll(\"webaudio-knob,webaudio-slider,webaudio-switch\");\n    }\n    initWebAudioControls() {\n      if(navigator.requestMIDIAccess) {\n        navigator.requestMIDIAccess().then(\n          (ma)=>{this.midiAccess = ma;this.enableInputs()},\n          (err)=>{ console.log(\"MIDI not initialized - error encountered:\" + err.code)}\n        );\n      }\n    }\n    enableInputs() {\n      let inputs = this.midiAccess.inputs.values();\n      console.log(\"Found \" + this.midiAccess.inputs.size + \" MIDI input(s)\");\n      for(let input = inputs.next(); input && !input.done; input = inputs.next()) {\n        console.log(\"Connected input: \" + input.value.name);\n        input.value.onmidimessage = this.handleMIDIMessage.bind(this);\n      }\n    }\n    midiConnectionStateChange(e) {\n      console.log(\"connection: \" + e.port.name + \" \" + e.port.connection + \" \" + e.port.state);\n      this.enableInputs();\n    }\n\n    onMIDIStarted(midi) {\n      this.midiAccess = midi;\n      midi.onstatechange = this.midiConnectionStateChange;\n      this.enableInputs(midi);\n    }\n    // Add hooks for external midi listeners support\n    addMidiListener(callback) {\n      this.listOfExternalMidiListeners.push(callback);\n    }\n    getCurrentConfigAsJSON() {\n      return this.currentConfig.stringify();\n    }\n    handleMIDIMessage(event) {\n      this.listOfExternalMidiListeners.forEach(function (externalListener) {\n        externalListener(event);\n      });\n      if(((event.data[0] & 0xf0) == 0xf0) || ((event.data[0] & 0xf0) == 0xb0 && event.data[1] >= 120))\n        return;\n      for(let w of this.listOfWidgets) {\n        if(w.processMidiEvent)\n          w.processMidiEvent(event);\n      }\n      if(opt.mididump)\n        console.log(event.data);\n    }\n    contextMenuOpen(e,knob){\n      if(!this.midiAccess)\n        return;\n      let menu=document.getElementById(\"webaudioctrl-context-menu\");\n      menu.style.left=e.pageX+\"px\";\n      menu.style.top=e.pageY+\"px\";\n      menu.knob=knob;\n      menu.classList.add(\"active\");\n      menu.knob.focus();\n      menu.knob.addEventListener(\"keydown\",this.contextMenuCloseByKey.bind(this));\n    }\n    contextMenuCloseByKey(e){\n      if(e.keyCode==27)\n       this.contextMenuClose();\n    }\n    contextMenuClose(){\n      let menu=document.getElementById(\"webaudioctrl-context-menu\");\n      menu.knob.removeEventListener(\"keydown\",this.contextMenuCloseByKey);\n      menu.classList.remove(\"active\");\n      let menuItemLearn=document.getElementById(\"webaudioctrl-context-menu-learn\");\n      menuItemLearn.innerHTML = 'Learn';\n      menu.knob.midiMode = 'normal';\n    }\n    contextMenuLearn(){\n      let menu=document.getElementById(\"webaudioctrl-context-menu\");\n      let menuItemLearn=document.getElementById(\"webaudioctrl-context-menu-learn\");\n      menuItemLearn.innerHTML = 'Listening...';\n      menu.knob.midiMode = 'learn';\n    }\n    contextMenuClear(e){\n      let menu=document.getElementById(\"webaudioctrl-context-menu\");\n      menu.knob.midiController={};\n      this.contextMenuClose();\n    }\n    preserveMidiLearn(){\n      if(!opt.preserveMidiLearn)\n        return;\n      const v=[];\n      for(let w of this.listOfWidgets) {\n        if(w.id)\n          v.push({\"id\":w.id, \"cc\":w.midiController});\n      }\n      const s=JSON.stringify(v);\n      localStorage.setItem(\"WebAudioControlsMidiLearn\",s);\n    }\n  }\n  if(window.UseWebAudioControlsMidi||opt.useMidi)\n    window.webAudioControlsWidgetManager = window.webAudioControlsMidiManager = new WebAudioControlsWidgetManager();\n}\n","import styled from 'styled-components'\nconst Colors = {\n    primary: '#36322F',\n    secondary: '#3A2317',\n    pop: '#B6781B',\n    logo: '#D2CDC9',\n    light: '#dca',\n    mid: '#a85',\n    dark: '#753',\n}\n\nconst Screen = styled.div`\n    flex-grow: 1;\n    display:flex;\n    alig-content: center;\n    flex-direction: column;\n    justify-content: space-around;\n    background-color: ${Colors.primary};\n    background-size: 15px 15px;\n`;\n\nconst CarbonScreen = styled.div`\nflex-grow: 1;\ndisplay:flex;\nalig-content: center;\nflex-direction: column;\njustify-content: space-around;\nbackground: \nlinear-gradient(27deg, #151515 5px, transparent 5px) 0 5px,\nlinear-gradient(207deg, #151515 5px, transparent 5px) 10px 0px,\nlinear-gradient(27deg, #222 5px, transparent 5px) 0px 10px,\nlinear-gradient(207deg, #222 5px, transparent 5px) 10px 5px,\nlinear-gradient(90deg, #1b1b1b 10px, transparent 10px),\nlinear-gradient(#1d1d1d 25%, #1a1a1a 25%, #1a1a1a 50%, transparent 50%, transparent 75%, #242424 75%, #242424);\nbackground-color: #131313;\nbackground-size: 15px 15px;\n`;\n\nconst InstrumentWrapper = styled.div`\n    flex-grow: 1;\n    display:flex;\n    alig-content: center;\n    flex-direction: column;\n    justify-content: space-around;\n    border-radius: 15px;\n    border-style: solid;\n    border-color: ${Colors.logo};\n    border-width: 3px;\n    padding: 10px;\n    margin: 10px;\n    background: linear-gradient(45deg, ${Colors.light} 12%, transparent 0, transparent 88%, ${Colors.light} 0),\n    linear-gradient(135deg, transparent 37%, ${Colors.mid} 0, ${Colors.mid} 63%, transparent 0),\n    linear-gradient(45deg, transparent 37%, ${Colors.light} 0, ${Colors.light} 63%, transparent 0) ${Colors.dark};\n    background-size: 4px px;\n`;\n\nconst RowSection = styled.div`\n    display:flex;\n    alig-content: center;\n    flex-direction: row;\n    justify-content: space-around;\n`;\n\nconst ColSection = styled.div`\n    display:flex;\n    alig-content: center;\n    flex-direction: column;\n    justify-content: space-around;\n`;\n\nconst InstTitle = styled.p`\n    font-weight: bold;\n    font-size: 20px;\n    color: ${Colors.secondary}\n`;\n\nexport {Colors, Screen, RowSection, ColSection, InstrumentWrapper, InstTitle}","import React from 'react'\nimport { Colors, RowSection, ColSection } from './styledComponents';\nimport styled from 'styled-components';\n\nconst Pad = styled.button`\n    background-color: #71F79F;\n    width: 15%;\n    height: 50px;\n`;\n\n//Sequencer displays a list of intervals either on(1) or off(0)\n//Takes the intervals to be displayed, current interval to highligh\nconst Sequencer = ({intervals, setIntervals, division, currentInterval, }) => {\n   const toggleState = (index) =>{\n        var intervalsCopy = intervals;\n        if (intervalsCopy[index] === 1){\n            intervalsCopy[index] = 0;\n        } else {\n            intervalsCopy[index] =1;\n        }\n        setIntervals(intervalsCopy)\n   }\n\n    return (\n        <RowSection>\n            {intervals.map((item, index)=>{if((index%division)===0){\n                if(index%2===0){\n                    var label = (Math.floor(index/2)%4)+1;\n                } else {\n                    var label = '+'\n                }\n                if(currentInterval === index){\n                    var outline = Colors.logo\n                } else {\n                    var outline = Colors.primary\n                }\n                switch (item){\n                    case 0:\n                        var color = Colors.dark\n                        break;\n                    case 1:\n                        var color = Colors.pop\n                        break;\n                    case 2:\n                        var color = '#6320EE'\n                        break;\n                    case 3:\n                        var color = '#218380'\n                        break;\n                    case 4:\n                        var color = '#73D2DE'\n                        break;\n                    case 5:\n                        var color = '#8F2D56'\n                        break;\n                }\n\n                return(\n                <ColSection key={index}> \n                    \n                    <Pad key={index} \n                        style = {{backgroundColor:color}}\n                        onClick={()=>{toggleState(index)}}> \n                        <p style={{textAlign:'center', color:outline, fontWeight:'bold'}}>{label}</p>\n                    </Pad>\n                </ColSection>\n            )}}\n                )}\n        </RowSection>\n    )\n}\n\nexport default Sequencer\n","import React, { Component } from 'react'\nimport ReactDOM from 'react-dom';\nimport * as Tone from 'tone'\nimport {Colors, Screen, RowSection, ColSection, InstrumentWrapper, InstTitle} from '../components/styledComponents'\nimport Sequencer from '../components/Sequencer';\n\nexport default class Drums extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            kickGain:0.5,\n        }\n    }\n    componentDidMount(){\n        let kickNode = ReactDOM.findDOMNode(this.knobRef)\n        let snareNode = ReactDOM.findDOMNode(this.snareRef)\n        kickNode.addEventListener(\"input\", this.changeKickGain.bind(this))\n        snareNode.addEventListener(\"input\", this.changeSnareGain.bind(this))\n    }\n    //Must be triggered by user action\n    init(){\n        //Kick\n        this.kickGain = new Tone.Gain(0.5).toDestination();\n        this.kickSampler = new Tone.Player(this.props.config.kickUrl).connect(this.kickGain);\n        //Snare\n        this.snareGain = new Tone.Gain(0.5).toDestination();\n        this.snareSampler = new Tone.Player(this.props.config.snareUrl).connect(this.snareGain);\n    }\n\n    clickCallback(click, time){\n            //Play Kick at Loop Interval\n            var kickLoop = this.props.config.kickLoop;\n            if(kickLoop[ click %kickLoop.length ]===1){\n                this.kickSampler.start(time)\n            }\n            //Play Snare at Loop Interval\n            var snareLoop = this.props.config.snareLoop;\n            if(snareLoop[click%snareLoop.length]===1){\n                this.snareSampler.start(time)\n            }\n\n    }\n    kickSetLoop(intervals){\n        this.props.updateConfig({kickLoop: intervals})\n        //With backend this could be a mutation to update phrase props.config\n    }\n    changeKickGain(event){\n        this.kickGain.gain.value = event.target.value/100\n    }\n    //Snare set Intervals\n    snareSetLoop(intervals){\n        this.props.updateConfig({snareLoop:intervals})\n    }\n    changeSnareGain(event){\n        this.snareGain.gain.value = event.target.value/100\n    }\n\n\n    render() {\n        return (\n            <div>\n                <InstrumentWrapper> \n                <RowSection> \n                   <InstTitle>Kick </InstTitle>\n                    <img src={'/kickIcon.png'} width=\"50\" height=\"50\"/>\n                    <webaudio-knob ref={node=>this.knobRef = node} src={'%PUBLIC_URL%/knob_1.png'} value={50} diameter=\"50\" id=\"knob1\" />\n                    \n                </RowSection>\n                <Sequencer intervals={this.props.config.kickLoop} setIntervals={this.kickSetLoop.bind(this)} division={1} currentInterval={this.props.click%this.props.config.kickLoop.length}/>\n            </InstrumentWrapper>\n            <InstrumentWrapper>\n                <RowSection> \n                    <InstTitle>Snare</InstTitle>\n                    <img src={'/snareIcon.png'} width=\"70\" height=\"70\"/>\n                    <ColSection>\n                    <webaudio-knob ref={node=>this.snareRef = node} src={'%PUBLIC_URL%/knob_1.png'} value={50} diameter=\"50\" id=\"knobSnare\" />\n                    </ColSection>\n                </RowSection>\n                <Sequencer intervals={this.props.config.snareLoop} setIntervals={this.snareSetLoop.bind(this)} division={1} currentInterval={this.props.click%this.props.config.kickLoop.length}/>\n            </InstrumentWrapper>\n            </div>\n        )\n    }\n}\n","import React, {useState} from 'react'\nimport { Colors, RowSection, ColSection } from './styledComponents';\nimport styled from 'styled-components';\n\nconst ChordList = styled.div`\n    display: flex;\n    flex-direction: row;\n    background-color: ${Colors.primary};\n    margin: 20px 20px;\n    padding: 20px 20px;\n    width: 80%;\n    height: 100px\n`;\n\nconst AddChord = styled.div`\n    color: ${Colors.primary};\n    align-self: start;\n`;\n\nconst Chord = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    margin: 5px;\n    background-color: ${Colors.dark};\n    border-radius: 10px;\n    width: 75px;\n    height: 90%;\n`;\n\nconst CText = styled.p`\n    flex:0;\n    text-align: center;\n    color: ${Colors.logo};\n    padding:0px;\n    \n`;\n\n\n//Sequencer displays a list of intervals either on(1) or off(0)\n//Takes the intervals to be displayed, current interval to highligh\nconst Progression = ({addChord, chordList, chords, clearChords }) => {\n    const lengths = [0,1,2,3,4,5,6,7,8]\n    const [chord, setChord] = useState(chords[0])\n    const [length, setLength] = useState(0)\n\n    const newChord = () =>{\n        var newChord = {chord:chord, len:length};\n        addChord(newChord)\n    }\n    const handleChange =(event)=>{\n        console.log(\"Changed Chord\")\n        console.log(event.target.value)\n        var chd = chords.find((obj)=>obj.interval===event.target.value)\n        console.log(chd.note)\n        setChord(chd)\n\n    }\n\n    return (\n       \n       <RowSection>\n           <AddChord>\n            <ColSection > \n                <p>Chord</p>\n                <select value={chord.interval} onChange={handleChange}> \n                    {chords.map(option => <option value={option.interval}>{option.interval} : {option.note+option.chordMode}</option>)}\n                </select>\n                <select  onChange={(event)=>setLength(event.target.value)}> \n                    {lengths.map(option => <option value={option}>{option}</option>)}\n                </select>\n\n                <button onClick={newChord}>Add</button>\n                <button onClick={clearChords}>Clear</button>\n            </ColSection>\n        </AddChord>\n        <ChordList>\n            {chordList.map(({chord,len}, index)=> \n                <Chord key={index}> \n                    <CText> {chord.interval} : {chord.note}</CText>\n                    <CText>Beats:</CText>\n                    <CText>{len}</CText>\n                </Chord>\n            )}\n        </ChordList>        \n        </RowSection>\n    )\n}\n\nexport default Progression\n","import React, { Component } from 'react'\nimport ReactDOM from 'react-dom';\nimport * as Tone from 'tone'\nimport {Colors, Screen, RowSection, ColSection, InstrumentWrapper, InstTitle} from '../components/styledComponents'\nimport Progression from '../components/Progression';\nimport Sequencer from '../components/Sequencer';\n\n\nexport default class Rhythm extends Component {\n    constructor(props){\n        super(props);\n\n        this.rhythmPlayingNote = '';\n\n        this.state = {\n\n        }\n\n    }\n\n    //Component Mounts Add listeners for Knobs\n    componentDidMount(){\n        let rhythmNode = ReactDOM.findDOMNode(this.rhythmRef)\n        rhythmNode.addEventListener(\"input\", this.changeRhythmGain.bind(this))  \n    }\n\n    init() {\n        //Rhythm Instrument\n        this.rhythmGain = new Tone.Gain(0.5).toDestination();\n        this.rhythmSynth = new Tone.PolySynth().connect(this.rhythmGain);\n    }\n    clickCallback(click, time){\n        //Play Rhythm Loop\n        var rhythmLoop = this.props.config.rhythmLoop;\n        if(rhythmLoop[click % rhythmLoop.length]){\n            if(this.props.config.rhythmGroove[click % this.props.config.loopLengthIntervals]){\n                console.log(`Click: ${click}`)\n                console.log(`RhythmLoop: ${rhythmLoop}`)\n                console.log(`Chord: ${rhythmLoop[click % rhythmLoop.length]}`)\n                this.playRhythm(rhythmLoop[click % rhythmLoop.length], time)\n\n            }\n            }\n    }\n\n    \n        //Add Chord to phrase list\n    addChord(chord){\n        var chordListCpy = this.props.config.chordList;\n        chordListCpy.push(chord)\n        this.props.updateConfig({chordList:chordListCpy})\n        console.log(chordListCpy)\n        this.setRhythmLoop(chordListCpy)\n    }\n    //Set the Rhythm Loop based on Chord Values\n    setRhythmLoop(chordList){\n        var rhythmLoop=[];\n        chordList.forEach(chord => {\n            console.log(chord.len)\n            for (var i=0; i<chord.len ;i++){\n                rhythmLoop.push(chord.chord.interval)\n                console.log('Adding ' + chord.chord)\n            }\n        })\n        \n        console.log(\"Rhythm Loop Set\")\n        console.log(rhythmLoop)\n        this.props.updateConfig({rhythmLoop: rhythmLoop})\n    \n    }\n    async clearRhythmLoop(){\n        await this.props.updateConfig({chordList:[]})\n        this.props.updateConfig({rhythmLoop:[]})\n    }\n    //Trigger Rhythm when chord changes\n    playRhythm(chord, time, length=\"8n\",){\n            const chordObj = this.props.config.key.intervals.find((interval)=> interval.interval == chord)\n            this.rhythmSynth.triggerAttackRelease(chordObj.chordFreqs,length, time);\n            console.log(\"playing Rhythm\")\n            this.rhythmPlayingNote = chord;\n        \n    }\n    changeRhythmGain(event){\n        this.rhythmGain.gain.value = event.target.value/100\n    }\n\n    render() {\n        return (\n            <>  \n            <InstrumentWrapper>\n            <RowSection> \n                <InstTitle>Rhythm</InstTitle>\n                <webaudio-knob ref={node=>this.rhythmRef = node} src={'%PUBLIC_URL%/knob_1.png'} value={50} diameter=\"50\" id=\"knobRhythm\" />\n            </RowSection>\n            <RowSection> \n                <button onClick={()=>this.playRhythm('I')}>Play I Chord: {this.props.config.key.intervals[0].note + this.props.config.key.intervals[0].chordMode}</button>\n                <button onClick={()=>this.playRhythm('ii')}>Play ii Chord {this.props.config.key.intervals[1].note+ this.props.config.key.intervals[1].chordMode}</button>\n                <button onClick={()=>this.playRhythm('iii')}>Play iii Chord {this.props.config.key.intervals[2].note+ this.props.config.key.intervals[2].chordMode}</button>\n                <button onClick={()=>this.playRhythm('IV')}>Play IV Chord {this.props.config.key.intervals[3].note+ this.props.config.key.intervals[3].chordMode}</button>\n                <button onClick={()=>this.playRhythm('V')}>Play V Chord {this.props.config.key.intervals[4].note+ this.props.config.key.intervals[4].chordMode}</button>\n                <button onClick={()=>this.playRhythm('vi')}>Play vi Chord {this.props.config.key.intervals[5].note+ this.props.config.key.intervals[5].chordMode}</button>\n            </RowSection>\n            <Progression addChord={this.addChord.bind(this)} chordList={this.props.config.chordList} chords={this.props.config.key.intervals} clearChords={this.clearRhythmLoop.bind(this)}/>\n            <p>Groove Pattern</p>\n            <Sequencer intervals={this.props.config.rhythmGroove} setIntervals={(intervals)=>{this.props.updateConfig({rhythmGroove:intervals})}} division={1}/>\n            </InstrumentWrapper>\n            </>\n        )\n    }\n}\n","import React, {useEffect} from 'react'\nimport { RowSection } from './styledComponents';\n\n\nconst Keys = ({keypress, keyup}) => {\n    const keyConfig = {\n        'f':1,\n        'g':2,\n        'h':3,\n        'j':4,\n        'k':5\n    }\n\n    useEffect(() => {\n        //Key Press: Listener\n        document.addEventListener('keypress', keypress)\n        //Syth Key Up event handler\n        document.addEventListener('keyup', keyup)\n        return () => {\n            document.removeEventListener('keypress', keypress);\n            document.removeEventListener('keyup', keyup)\n        }\n    }, [])\n    \n    return (\n        <RowSection>\n            {Object.entries(keyConfig).map((entry,index)=>\n                <button key={index} onMouseDown={()=>keypress({key:entry[0]})} onMouseUp={()=>keyup({key:entry[0]})}>\n                    <p>{`Note: ${entry[1]}`}</p>\n                    <p>{`Key: ${entry[0]}`}</p>\n                    \n                </button>\n            )}\n        </RowSection>\n    )\n}\n\nexport default Keys\n","import React, { Component } from 'react'\nimport ReactDOM from 'react-dom';\nimport * as Tone from 'tone'\nimport {Colors, Screen, RowSection, ColSection, InstrumentWrapper, InstTitle} from '../components/styledComponents'\nimport Sequencer from '../components/Sequencer';\nimport Keys from '../components/Keys';\nexport default class Lead extends Component {\n    constructor(props){\n        super(props);\n        this.keyup = this.keyup.bind(this)\n        this.keypress = this.keypress.bind(this)\n        this.leadKeyNote = 0;//Tracks key press in real time\n        this.leadPlayingNote = 0;//Tracks note being played by synth in real time\n        this.state = {\n            leadKeyNoteDisplay: 0,\n            isLooping: false,\n        }\n\n    }\n    init(){\n        //Setup Synth Instruments\n        this.leadGain = new Tone.Gain(0.5).toDestination();\n        this.leadSynth = new Tone.Synth().connect(this.leadGain);\n            \n    }\n\n    clickCallback(click, time){\n        //const time = Tone.now()\n        //Synth Lead Looper\n        this.syncLeadLoop(click,time)\n    }\n    \n\n    //Lead Synth Callbacks\n\n    //Keyboard Press: Event Listener Callback Play Synth and Set note\n    keypress(e){\n\n        var keyNote = 0;\n        switch(e.key){\n            case 'f':\n                keyNote = 1;\n                break\n            case 'g':\n                keyNote = 2;\n                break\n            case 'h':\n                keyNote = 3;\n                break\n            case 'j':\n                keyNote = 4;\n                break\n            case 'k':\n                keyNote = 5;\n                break\n        }\n        if(this.leadKeyNote != keyNote){\n            this.leadKeyNote = keyNote;\n            this.playLeadSynth(keyNote)\n            this.setState({leadKeyNoteDisplay: keyNote})\n        } \n    }\n    //Keyboard Press: Event Listener Callback\n    keyup(e){\n        var keyNote = 0;\n        switch(e.key){\n            case 'f':\n                keyNote = 1;\n                break\n            case 'g':\n                keyNote = 2;\n                break\n            case 'h':\n                keyNote = 3;\n                break\n            case 'j':\n                keyNote = 4;\n                break\n            case 'k':\n                keyNote = 5;\n                break\n        }\n        if(this.leadKeyNote === keyNote){\n            this.playLeadSynth(0)\n            this.setState({leadKeyNoteDisplay: 0});\n            this.leadKeyNote = 0;\n        }\n    }\n    //Returns the current note from either keypress or note\n    syncLeadLoop(click, time){\n        var loopInt = click % this.props.config.loopLengthIntervals;\n        var synthNote = 0; //Set default synth note to 0\n        //If a note is being played from the key press\n        if(this.leadKeyNote > 0){ \n            //this.playLeadSynth(this.leadKeyNote,time)\n            if(this.state.isLooping){\n                var copyLoop = this.props.config.leadLoop; //Create copy of lead loop\n                copyLoop[loopInt] = this.leadKeyNote; //change current value to note being played\n                this.props.updateConfig({leadLoop: copyLoop}) //set new state\n            }\n        }else { // Key is not playing check if a note loop is in the loop\n            var loopNote = this.props.config.leadLoop[loopInt]\n            if(loopNote > 0){ // if the note in loop is not zero\n                synthNote = loopNote;\n                this.playLeadSynth(loopNote, time)\n            } else {\n                this.playLeadSynth(0, time)\n            }\n        }\n    }\n    //Play Lead Synth Given pentatonic note: 1-5\n    playLeadSynth(synthNote){\n        \n        if (synthNote > 0){\n            var playNote = this.props.config.key.scaleFreqs.majorPent[synthNote-1]\n            if (playNote != this.leadPlayingNote){\n                this.leadSynth.triggerAttack(playNote)\n                this.leadPlayingNote = playNote;\n            }\n        } else {\n            this.leadSynth.triggerRelease()\n            this.leadPlayingNote = 0;\n        }\n    }\n    //Clear Loop\n    clearLeadLoop(){\n        var blankLoop = new Array(this.props.config.loopLengthIntervals).fill(0)\n        this.props.updateConfig({leadLoop: blankLoop});\n    }\n    //Change gain\n    changeLeadGain(value){\n        this.leadGain.gain.value = value/100\n    }\n    render() {\n        return (\n            <InstrumentWrapper>\n                <RowSection> \n                    <p>Lead</p>\n                    <p>Volume</p>\n                    <input type='range' onChange={(event)=>this.changeLeadGain(event.target.value)}/>\n                </RowSection>\n                <RowSection>\n                    <p> Lead Interval: {this.state.leadKeyNoteDisplay}</p>\n                    <ColSection>\n                        <p>Scale: {this.props.config.scaleShape} </p>\n                        <RowSection> \n\n                        </RowSection>\n                    </ColSection>\n                    <button onClick={()=>{this.setState({isLooping: !this.state.isLooping})}}> {this.state.isLooping?'Looping':'Not Looping'} </button>\n                    <button onClick={this.clearLeadLoop.bind(this)}> Reset Loop </button>\n                </RowSection>\n                <Sequencer intervals={this.props.config.leadLoop}  division={1} currentInterval={this.state.beatDisplay}/>\n            \n                <Keys keypress={this.keypress} keyup={this.keyup} />\n            </InstrumentWrapper>\n        )\n    }\n}\n","import React, {useState, useEffect, useRef} from 'react'\nimport '../theme.css'\nimport { Colors, RowSection, Screen } from '../components/styledComponents'\nimport * as Tone from 'tone';\nimport '../webaudio-controls'\nimport Drums from '../controllers/drums';\nimport Rhythm from '../controllers/rhythm';\nimport Lead from '../controllers/lead';\n\nconst midC = 261.625565;\nconst chromatic = ['C','C#','D','D#','E','F','F#','G','G#','A','A#','B'];\nconst natMaj = [0,2,4,5,7,9,11];\n\nconst getChromNotes = (c) =>{\n    var chromNotes = []\n    chromatic.map((item,index)=>{\n        var freq = c * Math.pow(2,index/12)\n        chromNotes.push(freq)\n    })\n    console.log(chromNotes)\n    return chromNotes;\n}\nconst chromNotes = getChromNotes(midC)\n//TODO: \n// -- Track Click in Jam Session and change config based on Session Events\n// -- Dynamic loop lengths\n\nvar jambotConfig = {\n    rootNote: 'C4', //is the 1 interval\n    scalePattern: [6, 1 , 2, 3, 5 ], //Minor Pentatonic mode of major root C\n    numBars: 2, \n    beatsPerBar: 4,\n    beatIntervals: 2,\n    loopLengthIntervals: 16,\n    clickBaseInterval: '8n',\n    kickUrl: \"%PUBLIC_URL%/samples/kick.wav\",\n    snareUrl: \"%PUBLIC_URL%/samples/snare.wav\",\n    kickLoop:  [1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,],\n    snareLoop: [0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,],\n    leadLoop: new Array(16).fill(0),\n    rhythmLoop: new Array(16).fill(0),\n    rhythmGroove: [1,0,1,1,0,1,1,1,1,0,1,1,0,1,1,1],\n    tempo: 120,\n    keyRoot: 'A',\n    scaleShape: 'Major Pent',\n    chordList: [],\n    key : {\n        root: '',\n        intervals : [\n             {\n                interval: 'I',\n                note: 'Note',\n                freq: 0,\n                chordMode :'',\n                chordFreqs: []\n            },\n            {\n                interval: 'ii',\n                note: 'Note',\n                freq: 0,\n                chordMode :'m',\n                chordFreqs: []\n            },\n            {\n                interval: 'iii',\n                note: 'Note',\n                freq: 0,\n                chordMode :'m',\n                chordFreqs: []\n            },\n            {\n                interval: 'IV',\n                note: 'Note',\n                freq: 0,\n                chordMode :'',\n                chordFreqs: []\n            },\n            {\n                interval: 'V',\n                note: 'Note',\n                freq: 0,\n                chordMode :'',\n                chordFreqs: []\n            },\n            {\n                interval: 'vi',\n                note: 'Note',\n                freq: 0,\n                chordMode :'m',\n                chordFreqs: []\n            },\n            {\n                interval: 'vii',\n                note: 'Note',\n                freq: 0,\n                chordMode :'d',\n                chordFreqs: []\n            },\n        ],\n        scaleFreqs : {\n            relMinorPent : [],  // for use when the 6 chord is the root chord\n            minorPent: [],\n            majorPent: [],\n        }\n    }\n}\n\nconst JamSession = (pros) => {\n    var click = 0;\n    const [layout, setLayout] = useState(\"Setup\");//Setup, Loop, Review\n    const [clickDisplay, setClickDisplay] = useState(0)\n    const [config, setConfig] = useState(jambotConfig)\n    const [setup, setSetup] = useState(false);\n    const DrumRef = useRef();\n    const RhythmRef = useRef();\n    const LeadRef = useRef();\n    \n\n//Listener for Config Changes\n    useEffect(() => {\n        console.log(\"Config Changes\")\n        console.log(config)\n        return () => {\n            \n        }\n    }, [config])\n\n    const init = async ()=>{\n        console.log(\"initializing Tone JS\")\n        await Tone.start()\n        DrumRef.current.init()\n        RhythmRef.current.init()\n        LeadRef.current.init()\n        loadKey(config.keyRoot)\n        setLayout(\"Loop\")\n\n    }\n    //Session Timer Loop\n    const clickCallback = (time) =>{\n        LeadRef.current.clickCallback(click, time)\n        DrumRef.current.clickCallback(click, time)\n        RhythmRef.current.clickCallback(click, time)\n        \n        click++;\n        setClickDisplay(click);\n    }\n\n//Update Config Callback passed to children\n    const updateConfig =(obj)=>{\n        var key = Object.keys(obj)\n        var value = obj[key];\n        console.log(`Updating ${key} with ${value}`)\n        setConfig({...config, \n            [key] :value\n        })\n\n    }\n//Session Commands\n    const select = () =>{\n\n    }\n    const start = () =>{\n        if(!setup){\n        const clickLoop = new Tone.Loop(time=>{\n            clickCallback(time);\n            \n        }, config.clickBaseInterval).start();\n        setSetup(true);\n        }\n\n        //Set transport BPM to state variable tempo\n        Tone.Transport.bpm.value = config.tempo;\n        //Start the transport now\n        Tone.Transport.start();\n    }\n    const pause = ()=>{\n        Tone.Transport.stop();\n    }\n    const stop = () =>{\n        setLayout(\"Review\")\n    }\n    //Load session from Storage/API\n    const load = ()=>{\n\n    }\n    //Save session to Storage/API\n    const save = ()=>{\n        console.log(`Saving`)\n        console.log(config)\n    }\n    const changeTempo = (value) =>{\n        //React State Tempo value    \n        updateConfig({tempo: value});\n        //Tone Loop tempo value\n        Tone.getTransport().bpm.value = value;\n    }\n    const loadKey = async (root) => {\n        var key = config.key;\n        key.root = root;\n        const rootIndex = chromatic.indexOf(root)\n        const rootFreq = chromNotes[rootIndex]\n\n        //Get Key Intervals - Notes and Frequencies\n        natMaj.map((semitone,index)=>{\n            var chromIndex =  semitone + rootIndex;\n            if(chromIndex>11){\n                chromIndex = chromIndex - 12 //reset to 0\n            }\n            //Set note letter note\n            key.intervals[index].note = (chromatic[chromIndex])\n            //Set note frequency\n            //TODO: To have ascending frequencies on all keys make this absolute\n            //this.key.intervals[index].freq = (chromNotes[chromIndex])\n            key.intervals[index].freq = rootFreq* Math.pow(2,semitone/12)\n    \n        })\n    \n        //Get Chord frequencies for each interval\n        var majorChordShape = [0,4,7];\n        var minorChordShape = [0,3,7];\n        key.intervals.map((interval)=>{\n            interval.chordFreqs = []\n            if (interval.chordMode === 'm'){//minor chord\n                minorChordShape.map((st)=>{\n                    const freq = interval.freq * Math.pow(2,st/12)\n                    interval.chordFreqs.push(freq)\n                })\n                \n            } else {\n                majorChordShape.map((st)=>{\n                    const freq = interval.freq * Math.pow(2,st/12)\n                    interval.chordFreqs.push(freq)\n                })\n            }\n    \n        })\n    \n    \n        //Get key Scales\n\n        var minorPent = [0,3,5,7,10]\n        key.scaleFreqs.minorPent = []\n        minorPent.map(semitone=>{\n            var freq = rootFreq * Math.pow(2,semitone/12)\n            key.scaleFreqs.minorPent.push(freq)\n        })\n        var majorPent = [0,2,4,7,9]\n        key.scaleFreqs.majorPent = []\n        majorPent.map(semitone=>{\n            var freq = rootFreq * Math.pow(2,semitone/12)\n            key.scaleFreqs.majorPent.push(freq)\n        })\n        var relMinorPent = [-3, 0,2,4,7]\n        key.scaleFreqs.relMinorPent = []\n        relMinorPent.map(semitone=>{\n            var freq = rootFreq * Math.pow(2,semitone/12)\n            key.scaleFreqs.relMinorPent.push(freq)\n        })\n        console.log(key)\n        updateConfig({key:key})\n    }\n\n//Initialize Real Time Loop and refs\n    //InitToneJS\n\n\n    \n        //TODO Change screens to theme\n    return (\n        <Screen>\n            <h1 style={{color: Colors.pop,textAlign:'center'}}>The Jam-Bot</h1>\n            {layout===\"Setup\" && <button onClick={init}>Load Session</button>}\n            {layout===\"Review\" && \n                <div>\n                    <p>Reviewing Session</p>\n                    <button onClick={start} >Start New Session</button>\n                </div>}\n    \n            {layout==\"Loop\" && \n                <RowSection> \n                    <button onClick={pause}>Pause Loop</button>\n                    <button onClick={save}>Save</button>\n                    <button onClick={start} >Start Loop</button>\n                </RowSection>\n                }\n            <RowSection>\n                \n                <p>Root: </p>\n                        <select value={config.key.root} onChange={(event)=>{loadKey(event.target.value)}} name=\"keySelect\"> \n                            {chromatic.map((root, index)=>\n                                <option key={index} value={root}>{root}</option>\n                            )}\n                        </select>\n                \n                <p>Tempo: {config.tempo}</p>\n                <input type='range' value={config.tempo} onChange={(event)=>{changeTempo(event.target.value)}} min=\"50\" max=\"180\"/>  \n           \n            </RowSection>\n            <RowSection>\n                <p> Bar: {Math.floor(clickDisplay/8)+1}, Beat: {Math.floor((clickDisplay/2)%4)+1}, Interval: {clickDisplay%2} </p>\n\n            </RowSection>\n             <Drums ref={DrumRef} config={config} click={clickDisplay} updateConfig={updateConfig}/>\n            <Rhythm ref={RhythmRef} config={config} click={click} updateConfig={updateConfig}/>\n            <Lead ref={LeadRef} config={config} click={click} updateConfig={updateConfig}/>\n        </Screen>\n    )\n}\n\nexport default JamSession\n","import React from 'react'\nimport JamSession from \"./jamsession\";\n\nconst Screens = () => {\n    return (\n        <div>\n            <JamSession />\n        </div>\n    )\n}\n\nexport default Screens\n","import { Screen } from \"./components/styledComponents\";\nimport Screens from \"./screens\";\n\nfunction App() {\n  return (\n    <div style = {{backgroundColor:'#3DD6D0'}}>\n      <Screens />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}